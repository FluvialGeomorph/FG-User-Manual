<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Level 2 Workflow | FluvialGeomorph User Manual</title>
  <meta name="description" content="This user manual describes how to use FluvialGeomorph for stream analysis." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Level 2 Workflow | FluvialGeomorph User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://usermanual.fluvialgeomorph.org" />
  
  <meta property="og:description" content="This user manual describes how to use FluvialGeomorph for stream analysis." />
  <meta name="github-repo" content="FluvialGeomorph/FG-User-Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Level 2 Workflow | FluvialGeomorph User Manual" />
  
  <meta name="twitter:description" content="This user manual describes how to use FluvialGeomorph for stream analysis." />
  

<meta name="author" content="Michael Dougherty, Geographer, US Army Corps of Engineers, Rock Island District" />
<meta name="author" content="Christopher Haring, Geomorphologist/Research Physical Scientist, Coastal Hydraulics Laboratory, U.S. Army Corps of Engineers" />


<meta name="date" content="2021-04-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="level-1-workflow.html"/>
<link rel="next" href="level-3-workflow.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FluvialGeomorph User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>0.1</b> Abstract</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#distribution-statement"><i class="fa fa-check"></i><b>0.2</b> Distribution Statement</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#unit-conversion-factors"><i class="fa fa-check"></i><b>0.3</b> Unit Conversion Factors</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#notation-list"><i class="fa fa-check"></i><b>0.4</b> Notation List</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objective"><i class="fa fa-check"></i><b>1.2</b> Objective</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#approach"><i class="fa fa-check"></i><b>1.3</b> Approach</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>2</b> Install</a><ul>
<li class="chapter" data-level="2.1" data-path="install.html"><a href="install.html#software-requirements"><i class="fa fa-check"></i><b>2.1</b> Software Requirements</a></li>
<li class="chapter" data-level="2.2" data-path="install.html"><a href="install.html#install-r"><i class="fa fa-check"></i><b>2.2</b> Install <code>R</code></a></li>
<li class="chapter" data-level="2.3" data-path="install.html"><a href="install.html#install-rstudio"><i class="fa fa-check"></i><b>2.3</b> Install <code>RStudio</code></a></li>
<li class="chapter" data-level="2.4" data-path="install.html"><a href="install.html#install-taudem"><i class="fa fa-check"></i><b>2.4</b> Install TauDEM</a></li>
<li class="chapter" data-level="2.5" data-path="install.html"><a href="install.html#install-arcgis-pro"><i class="fa fa-check"></i><b>2.5</b> Install <code>ArcGIS Pro</code></a><ul>
<li class="chapter" data-level="2.5.1" data-path="install.html"><a href="install.html#limited-arcmap-support"><i class="fa fa-check"></i><b>2.5.1</b> Limited <code>ArcMap</code> support</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="install.html"><a href="install.html#install-arcgisbinding"><i class="fa fa-check"></i><b>2.6</b> Install <code>arcgisbinding</code></a><ul>
<li class="chapter" data-level="2.6.1" data-path="install.html"><a href="install.html#install-the-latest-arcgisbinding-version"><i class="fa fa-check"></i><b>2.6.1</b> Install the latest <code>arcgisbinding</code> version</a></li>
<li class="chapter" data-level="2.6.2" data-path="install.html"><a href="install.html#download-a-specific-arcgisbinding-package-version"><i class="fa fa-check"></i><b>2.6.2</b> Download a specific <code>arcgisbinding</code> package version</a></li>
<li class="chapter" data-level="2.6.3" data-path="install.html"><a href="install.html#install-a-specific-arcgisbinding-package-version"><i class="fa fa-check"></i><b>2.6.3</b> Install a specific <code>arcgisbinding</code> package version</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="install.html"><a href="install.html#install-fluvialgeomorph"><i class="fa fa-check"></i><b>2.7</b> Install FluvialGeomorph</a><ul>
<li class="chapter" data-level="2.7.1" data-path="install.html"><a href="install.html#install-the-fluvialgeomorph-r-packages"><i class="fa fa-check"></i><b>2.7.1</b> Install the FluvialGeomorph <code>R</code> packages</a></li>
<li class="chapter" data-level="2.7.2" data-path="install.html"><a href="install.html#troubleshooting"><i class="fa fa-check"></i><b>2.7.2</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="install.html"><a href="install.html#install-tutorial-data"><i class="fa fa-check"></i><b>2.8</b> Install Tutorial Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>3</b> Workflow</a><ul>
<li class="chapter" data-level="3.1" data-path="workflow.html"><a href="workflow.html#units_of_analysis"><i class="fa fa-check"></i><b>3.1</b> Units of Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="workflow.html"><a href="workflow.html#analysis-levels"><i class="fa fa-check"></i><b>3.2</b> Analysis Levels</a></li>
<li class="chapter" data-level="3.3" data-path="workflow.html"><a href="workflow.html#geodatabases"><i class="fa fa-check"></i><b>3.3</b> Geodatabases</a></li>
<li class="chapter" data-level="3.4" data-path="workflow.html"><a href="workflow.html#derived-features"><i class="fa fa-check"></i><b>3.4</b> Derived Features</a></li>
<li class="chapter" data-level="3.5" data-path="workflow.html"><a href="workflow.html#folder_structure"><i class="fa fa-check"></i><b>3.5</b> Project Folder Structure</a></li>
<li class="chapter" data-level="3.6" data-path="workflow.html"><a href="workflow.html#workflows"><i class="fa fa-check"></i><b>3.6</b> Workflows</a><ul>
<li class="chapter" data-level="3.6.1" data-path="workflow.html"><a href="workflow.html#L1_summary"><i class="fa fa-check"></i><b>3.6.1</b> Level 1</a></li>
<li class="chapter" data-level="3.6.2" data-path="workflow.html"><a href="workflow.html#L2_summary"><i class="fa fa-check"></i><b>3.6.2</b> Level 2</a></li>
<li class="chapter" data-level="3.6.3" data-path="workflow.html"><a href="workflow.html#L3_summary"><i class="fa fa-check"></i><b>3.6.3</b> Level 3</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="workflow.html"><a href="workflow.html#qa_tools"><i class="fa fa-check"></i><b>3.7</b> Quality Assurance</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tutorial-data.html"><a href="tutorial-data.html"><i class="fa fa-check"></i><b>4</b> Tutorial Data</a><ul>
<li class="chapter" data-level="4.1" data-path="tutorial-data.html"><a href="tutorial-data.html#map-templates"><i class="fa fa-check"></i><b>4.1</b> Map Templates</a></li>
<li class="chapter" data-level="4.2" data-path="tutorial-data.html"><a href="tutorial-data.html#cole-creek"><i class="fa fa-check"></i><b>4.2</b> Cole Creek</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="level-1-workflow.html"><a href="level-1-workflow.html"><i class="fa fa-check"></i><b>5</b> Level 1 Workflow</a><ul>
<li class="chapter" data-level="5.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-terrain"><i class="fa fa-check"></i><b>5.1</b> Create Terrain</a><ul>
<li class="chapter" data-level="5.1.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#define-study-area"><i class="fa fa-check"></i><b>5.1.1</b> Define Study Area</a></li>
<li class="chapter" data-level="5.1.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#acquire-study-area-watershed-elevation-model"><i class="fa fa-check"></i><b>5.1.2</b> Acquire Study Area Watershed Elevation Model</a></li>
<li class="chapter" data-level="5.1.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#develop-high-resolution-elevation-model"><i class="fa fa-check"></i><b>5.1.3</b> Develop High Resolution Elevation Model</a></li>
<li class="chapter" data-level="5.1.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#hydro-modify-dem"><i class="fa fa-check"></i><b>5.1.4</b> Hydro Modify DEM</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#define-stream-reaches"><i class="fa fa-check"></i><b>5.2</b> Define Stream Reaches</a><ul>
<li class="chapter" data-level="5.2.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-contributing-area"><i class="fa fa-check"></i><b>5.2.1</b> Calculate Contributing Area</a></li>
<li class="chapter" data-level="5.2.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#derive-stream-network"><i class="fa fa-check"></i><b>5.2.2</b> Derive Stream Network</a></li>
<li class="chapter" data-level="5.2.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-slope-and-sinuosity"><i class="fa fa-check"></i><b>5.2.3</b> Calculate Slope and Sinuosity</a></li>
<li class="chapter" data-level="5.2.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#define-reaches"><i class="fa fa-check"></i><b>5.2.4</b> Define Reaches</a></li>
<li class="chapter" data-level="5.2.5" data-path="level-1-workflow.html"><a href="level-1-workflow.html#delineate-watersheds"><i class="fa fa-check"></i><b>5.2.5</b> Delineate Watersheds</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#derive-flowline"><i class="fa fa-check"></i><b>5.3</b> Derive Flowline</a><ul>
<li class="chapter" data-level="5.3.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-the-site-geodatabase"><i class="fa fa-check"></i><b>5.3.1</b> Create the site geodatabase</a></li>
<li class="chapter" data-level="5.3.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-the-flowline"><i class="fa fa-check"></i><b>5.3.2</b> Create the Flowline</a></li>
<li class="chapter" data-level="5.3.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-the-reach-geodatabase"><i class="fa fa-check"></i><b>5.3.3</b> Create the Reach Geodatabase</a></li>
<li class="chapter" data-level="5.3.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-flowline-points"><i class="fa fa-check"></i><b>5.3.4</b> Create Flowline Points</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#define-initial-floodplain-and-channel-extent"><i class="fa fa-check"></i><b>5.4</b> Define Initial Floodplain and Channel Extent</a><ul>
<li class="chapter" data-level="5.4.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#detrend-dem"><i class="fa fa-check"></i><b>5.4.1</b> Detrend DEM</a></li>
<li class="chapter" data-level="5.4.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#estimate-initial-channel-extent"><i class="fa fa-check"></i><b>5.4.2</b> Estimate Initial Channel Extent</a></li>
<li class="chapter" data-level="5.4.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-the-initial-channel-mask-layer"><i class="fa fa-check"></i><b>5.4.3</b> Create the Initial Channel Mask layer</a></li>
<li class="chapter" data-level="5.4.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#estimate-initial-floodplain-extent"><i class="fa fa-check"></i><b>5.4.4</b> Estimate Initial Floodplain Extent</a></li>
<li class="chapter" data-level="5.4.5" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-channel-slope-raster"><i class="fa fa-check"></i><b>5.4.5</b> Calculate Channel Slope Raster</a></li>
<li class="chapter" data-level="5.4.6" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-initial-centerline"><i class="fa fa-check"></i><b>5.4.6</b> Create Initial Centerline</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-regular-cross-section-geometry"><i class="fa fa-check"></i><b>5.5</b> Create Regular Cross Section Geometry</a><ul>
<li class="chapter" data-level="5.5.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-regular-cross-sections"><i class="fa fa-check"></i><b>5.5.1</b> Create Regular Cross Sections</a></li>
<li class="chapter" data-level="5.5.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-cross-section-watershed-area"><i class="fa fa-check"></i><b>5.5.2</b> Calculate Cross Section Watershed Area</a></li>
<li class="chapter" data-level="5.5.3" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-cross-section-river-position"><i class="fa fa-check"></i><b>5.5.3</b> Calculate Cross Section River Position</a></li>
<li class="chapter" data-level="5.5.4" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-cross-section-points"><i class="fa fa-check"></i><b>5.5.4</b> Calculate Cross Section Points</a></li>
<li class="chapter" data-level="5.5.5" data-path="level-1-workflow.html"><a href="level-1-workflow.html#calculate-cross-section-l1-dimensions"><i class="fa fa-check"></i><b>5.5.5</b> Calculate Cross Section L1 Dimensions</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="level-1-workflow.html"><a href="level-1-workflow.html#identify-infrastructure"><i class="fa fa-check"></i><b>5.6</b> Identify Infrastructure</a><ul>
<li class="chapter" data-level="5.6.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#create-features"><i class="fa fa-check"></i><b>5.6.1</b> Create Features</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="level-1-workflow.html"><a href="level-1-workflow.html#run-report"><i class="fa fa-check"></i><b>5.7</b> Run Report</a><ul>
<li class="chapter" data-level="5.7.1" data-path="level-1-workflow.html"><a href="level-1-workflow.html#run-the-level-1-report"><i class="fa fa-check"></i><b>5.7.1</b> Run the Level 1 Report</a></li>
<li class="chapter" data-level="5.7.2" data-path="level-1-workflow.html"><a href="level-1-workflow.html#perform-qa"><i class="fa fa-check"></i><b>5.7.2</b> Perform QA</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="level-1-workflow.html"><a href="level-1-workflow.html#determine-next-steps"><i class="fa fa-check"></i><b>5.8</b> Determine Next Steps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="level-2-workflow.html"><a href="level-2-workflow.html"><i class="fa fa-check"></i><b>6</b> Level 2 Workflow</a><ul>
<li class="chapter" data-level="6.1" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-initial-riffle-geometry"><i class="fa fa-check"></i><b>6.1</b> Create Initial Riffle Geometry</a><ul>
<li class="chapter" data-level="6.1.1" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-riffle-floodplain"><i class="fa fa-check"></i><b>6.1.1</b> Create Riffle Floodplain</a></li>
<li class="chapter" data-level="6.1.2" data-path="level-2-workflow.html"><a href="level-2-workflow.html#assign-cross-section-ids"><i class="fa fa-check"></i><b>6.1.2</b> Assign Cross Section IDs</a></li>
<li class="chapter" data-level="6.1.3" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-cross-section-watershed-area-1"><i class="fa fa-check"></i><b>6.1.3</b> Calculate Cross Section Watershed Area</a></li>
<li class="chapter" data-level="6.1.4" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-cross-section-river-position-1"><i class="fa fa-check"></i><b>6.1.4</b> Calculate Cross Section River Position</a></li>
<li class="chapter" data-level="6.1.5" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-riffle-channel"><i class="fa fa-check"></i><b>6.1.5</b> Create Riffle Channel</a></li>
<li class="chapter" data-level="6.1.6" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-cross-section-points-1"><i class="fa fa-check"></i><b>6.1.6</b> Calculate Cross Section Points</a></li>
<li class="chapter" data-level="6.1.7" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-initial-cross-section-l2-dimension"><i class="fa fa-check"></i><b>6.1.7</b> Calculate Initial Cross Section L2 Dimension</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="level-2-workflow.html"><a href="level-2-workflow.html#estimate-bankfull"><i class="fa fa-check"></i><b>6.2</b> Estimate Bankfull</a><ul>
<li class="chapter" data-level="6.2.1" data-path="level-2-workflow.html"><a href="level-2-workflow.html#run-the-estimate-bankfull-report"><i class="fa fa-check"></i><b>6.2.1</b> Run the Estimate Bankfull Report</a></li>
<li class="chapter" data-level="6.2.2" data-path="level-2-workflow.html"><a href="level-2-workflow.html#perform-qa-1"><i class="fa fa-check"></i><b>6.2.2</b> Perform QA</a></li>
<li class="chapter" data-level="6.2.3" data-path="level-2-workflow.html"><a href="level-2-workflow.html#determine-bankfull-elevation"><i class="fa fa-check"></i><b>6.2.3</b> Determine Bankfull Elevation</a></li>
<li class="chapter" data-level="6.2.4" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-bankfull-area"><i class="fa fa-check"></i><b>6.2.4</b> Create Bankfull Area</a></li>
<li class="chapter" data-level="6.2.5" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-banklines"><i class="fa fa-check"></i><b>6.2.5</b> Create Banklines</a></li>
<li class="chapter" data-level="6.2.6" data-path="level-2-workflow.html"><a href="level-2-workflow.html#create-final-centerline"><i class="fa fa-check"></i><b>6.2.6</b> Create Final Centerline</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-final-l2-cross-section-geometry"><i class="fa fa-check"></i><b>6.3</b> Calculate Final L2 Cross Section Geometry</a><ul>
<li class="chapter" data-level="6.3.1" data-path="level-2-workflow.html"><a href="level-2-workflow.html#calculate-final-cross-section-l2-dimensions"><i class="fa fa-check"></i><b>6.3.1</b> Calculate Final Cross Section L2 Dimensions</a></li>
<li class="chapter" data-level="6.3.2" data-path="level-2-workflow.html"><a href="level-2-workflow.html#add-modeled-water-surface-elevation"><i class="fa fa-check"></i><b>6.3.2</b> Add Modeled Water Surface Elevation</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="level-2-workflow.html"><a href="level-2-workflow.html#run-report-1"><i class="fa fa-check"></i><b>6.4</b> Run Report</a><ul>
<li class="chapter" data-level="6.4.1" data-path="level-2-workflow.html"><a href="level-2-workflow.html#run-the-l2-report"><i class="fa fa-check"></i><b>6.4.1</b> Run the L2 Report</a></li>
<li class="chapter" data-level="6.4.2" data-path="level-2-workflow.html"><a href="level-2-workflow.html#perform-qa-2"><i class="fa fa-check"></i><b>6.4.2</b> Perform QA</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="level-2-workflow.html"><a href="level-2-workflow.html#determine-next-steps-1"><i class="fa fa-check"></i><b>6.5</b> Determine Next Steps</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="level-3-workflow.html"><a href="level-3-workflow.html"><i class="fa fa-check"></i><b>7</b> Level 3 Workflow</a><ul>
<li class="chapter" data-level="7.1" data-path="level-3-workflow.html"><a href="level-3-workflow.html#define-valley-line"><i class="fa fa-check"></i><b>7.1</b> Define Valley Line</a><ul>
<li class="chapter" data-level="7.1.1" data-path="level-3-workflow.html"><a href="level-3-workflow.html#determine-final-floodplain-extent"><i class="fa fa-check"></i><b>7.1.1</b> Determine Final Floodplain Extent</a></li>
<li class="chapter" data-level="7.1.2" data-path="level-3-workflow.html"><a href="level-3-workflow.html#develop-candidate-valleylines"><i class="fa fa-check"></i><b>7.1.2</b> Develop Candidate Valleylines</a></li>
<li class="chapter" data-level="7.1.3" data-path="level-3-workflow.html"><a href="level-3-workflow.html#choose-final-valleyline"><i class="fa fa-check"></i><b>7.1.3</b> Choose Final Valleyline</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="level-3-workflow.html"><a href="level-3-workflow.html#define-meander-loops"><i class="fa fa-check"></i><b>7.2</b> Define Meander Loops</a><ul>
<li class="chapter" data-level="7.2.1" data-path="level-3-workflow.html"><a href="level-3-workflow.html#define-loop-points"><i class="fa fa-check"></i><b>7.2.1</b> Define Loop Points</a></li>
<li class="chapter" data-level="7.2.2" data-path="level-3-workflow.html"><a href="level-3-workflow.html#derive-bankline-points"><i class="fa fa-check"></i><b>7.2.2</b> Derive Bankline Points</a></li>
<li class="chapter" data-level="7.2.3" data-path="level-3-workflow.html"><a href="level-3-workflow.html#assign-cross-section-loops"><i class="fa fa-check"></i><b>7.2.3</b> Assign Cross Section Loops</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="level-3-workflow.html"><a href="level-3-workflow.html#calculate-l3-cross-section-geometry"><i class="fa fa-check"></i><b>7.3</b> Calculate L3 Cross Section Geometry</a><ul>
<li class="chapter" data-level="7.3.1" data-path="level-3-workflow.html"><a href="level-3-workflow.html#calculate-cross-section-l3-dimensions"><i class="fa fa-check"></i><b>7.3.1</b> Calculate Cross Section L3 Dimensions</a></li>
<li class="chapter" data-level="7.3.2" data-path="level-3-workflow.html"><a href="level-3-workflow.html#add-modeled-water-surface-elevation-1"><i class="fa fa-check"></i><b>7.3.2</b> Add Modeled Water Surface Elevation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="level-3-workflow.html"><a href="level-3-workflow.html#run-report-2"><i class="fa fa-check"></i><b>7.4</b> Run Report</a><ul>
<li class="chapter" data-level="7.4.1" data-path="level-3-workflow.html"><a href="level-3-workflow.html#run-the-l3-report"><i class="fa fa-check"></i><b>7.4.1</b> Run the L3 Report</a></li>
<li class="chapter" data-level="7.4.2" data-path="level-3-workflow.html"><a href="level-3-workflow.html#perform-qa-3"><i class="fa fa-check"></i><b>7.4.2</b> Perform QA</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="level-3-workflow.html"><a href="level-3-workflow.html#determine-next-steps-2"><i class="fa fa-check"></i><b>7.5</b> Determine Next Steps</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>8</b> Summary</a></li>
<li class="chapter" data-level="" data-path="qa-checklist.html"><a href="qa-checklist.html"><i class="fa fa-check"></i>QA Checklist</a><ul>
<li class="chapter" data-level="8.1" data-path="qa-checklist.html"><a href="qa-checklist.html#L1_report_qa"><i class="fa fa-check"></i><b>8.1</b> Level 1 Report</a><ul>
<li class="chapter" data-level="8.1.1" data-path="qa-checklist.html"><a href="qa-checklist.html#L1_study_area_overview"><i class="fa fa-check"></i><b>8.1.1</b> Study Area Overview</a></li>
<li class="chapter" data-level="8.1.2" data-path="qa-checklist.html"><a href="qa-checklist.html#L1_long_profiles"><i class="fa fa-check"></i><b>8.1.2</b> Longitudinal Profiles</a></li>
<li class="chapter" data-level="8.1.3" data-path="qa-checklist.html"><a href="qa-checklist.html#L1_xs_metrics"><i class="fa fa-check"></i><b>8.1.3</b> Cross Section Metrics</a></li>
<li class="chapter" data-level="8.1.4" data-path="qa-checklist.html"><a href="qa-checklist.html#L1_xs_profiles"><i class="fa fa-check"></i><b>8.1.4</b> Cross Section Profiles</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="qa-checklist.html"><a href="qa-checklist.html#estimate_bankfull_report_qa"><i class="fa fa-check"></i><b>8.2</b> Estimate Bankfull Report</a><ul>
<li class="chapter" data-level="8.2.1" data-path="qa-checklist.html"><a href="qa-checklist.html#study-area-overview"><i class="fa fa-check"></i><b>8.2.1</b> Study Area Overview</a></li>
<li class="chapter" data-level="8.2.2" data-path="qa-checklist.html"><a href="qa-checklist.html#bankfull-elevation-sensitivity-analysis"><i class="fa fa-check"></i><b>8.2.2</b> Bankfull Elevation Sensitivity Analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="qa-checklist.html"><a href="qa-checklist.html#estimate_bankfull_long_profile"><i class="fa fa-check"></i><b>8.2.3</b> Longitudinal Profile</a></li>
<li class="chapter" data-level="8.2.4" data-path="qa-checklist.html"><a href="qa-checklist.html#estimate_bankfull_xs_metrics"><i class="fa fa-check"></i><b>8.2.4</b> Cross Section Metrics</a></li>
<li class="chapter" data-level="8.2.5" data-path="qa-checklist.html"><a href="qa-checklist.html#cross-section-profiles"><i class="fa fa-check"></i><b>8.2.5</b> Cross Section Profiles</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="qa-checklist.html"><a href="qa-checklist.html#L2_report_qa"><i class="fa fa-check"></i><b>8.3</b> Level 2 Report</a><ul>
<li class="chapter" data-level="8.3.1" data-path="qa-checklist.html"><a href="qa-checklist.html#study-area-overview-1"><i class="fa fa-check"></i><b>8.3.1</b> Study Area Overview</a></li>
<li class="chapter" data-level="8.3.2" data-path="qa-checklist.html"><a href="qa-checklist.html#longitudinal-profile"><i class="fa fa-check"></i><b>8.3.2</b> Longitudinal Profile</a></li>
<li class="chapter" data-level="8.3.3" data-path="qa-checklist.html"><a href="qa-checklist.html#cross-section-metrics"><i class="fa fa-check"></i><b>8.3.3</b> Cross Section Metrics</a></li>
<li class="chapter" data-level="8.3.4" data-path="qa-checklist.html"><a href="qa-checklist.html#cross-section-profiles-1"><i class="fa fa-check"></i><b>8.3.4</b> Cross Section Profiles</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="qa-checklist.html"><a href="qa-checklist.html#L3_report_qa"><i class="fa fa-check"></i><b>8.4</b> Level 3 Report</a><ul>
<li class="chapter" data-level="8.4.1" data-path="qa-checklist.html"><a href="qa-checklist.html#study-area-overview-2"><i class="fa fa-check"></i><b>8.4.1</b> Study Area Overview</a></li>
<li class="chapter" data-level="8.4.2" data-path="qa-checklist.html"><a href="qa-checklist.html#longitudinal-profile-1"><i class="fa fa-check"></i><b>8.4.2</b> Longitudinal Profile</a></li>
<li class="chapter" data-level="8.4.3" data-path="qa-checklist.html"><a href="qa-checklist.html#cross-section-metrics-1"><i class="fa fa-check"></i><b>8.4.3</b> Cross Section Metrics</a></li>
<li class="chapter" data-level="8.4.4" data-path="qa-checklist.html"><a href="qa-checklist.html#cross-section-profiles-2"><i class="fa fa-check"></i><b>8.4.4</b> Cross Section Profiles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">FluvialGeomorph User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="level-2-workflow" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Level 2 Workflow</h1>
<p>This chapter describes the workflow steps necessary to complete a Level 2 FluvialGeomorph analysis.</p>
<div id="create-initial-riffle-geometry" class="section level2">
<h2><span class="header-section-number">6.1</span> Create Initial Riffle Geometry</h2>
<p>The purpose of this stage is to identify and map riffle cross sections and roughly estimate an initial bankfull elevation for the base year for each reach.</p>
<div id="create-riffle-floodplain" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Create Riffle Floodplain</h3>
<p>The purpose of this step is to identify riffle locations and map these cross sections across the lateral extent of the floodplain for each reach.</p>
<p>A riffle is a shallow river landform where water flows in a steep, thin sheet <span class="citation">(Luna Bergere Leopold and M. Gordon Wolman <a href="#ref-luna_bergere_leopold_river_1957" role="doc-biblioref">1957</a>)</span>. Riffles can be identified with the help of the <code>channel_slope</code> raster calculated in Level 1, and confirmed with high resolution aerial imagery. In the <code>channel_slope</code> raster, pools appear as relatively smooth areas of low slope due to the absence of LiDAR points (deep water absorbs laser pulses). Shallow water riffles appear as highly textured areas of relatively higher slope between pools due to the higher number of LiDAR points from the exposed bed material.</p>
<ul>
<li>Create a new line feature class (FC) named <code>riffle_floodplain</code> to store riffle cross sections. This feature class must use the same coordinate system as the vector datasets of the project. Add the following fields:
<ul>
<li><code>ReachName</code>: Text (50) - The purpose of this field is to store the reach name.</li>
<li><code>Seq</code>: long integer - The purpose of this field is to uniquely identify each cross section.</li>
</ul></li>
</ul>
<p><strong>Riffle Identifying Characteristics:</strong></p>
<ul>
<li>A straight reach between two meander bends, areas in the cross-overs between river bends</li>
<li>Clear indicators of the active floodplain or bankfull discharge</li>
<li>Presence of one or more terraces</li>
<li>Channel section and form typical of the stream</li>
<li>A reasonably clear view of of geomorphic features</li>
<li>Areas of high water surface slope (in the case of high gradient streams)</li>
<li>Areas of minimum depth and width</li>
<li>Channel width parallel and consistent</li>
<li>Avoid tributary influences</li>
<li>Cross sections should be drawn wide enough to capture the top of bank</li>
</ul>
<p><strong>Digitize Riffles</strong></p>
<ul>
<li>Digitize riffle cross sections beginning with the left descending bank. While editing, use the “Reverse Direction” command (aka flip) to ensure riffles are digitized in the correct direction.</li>
<li>A red vertex denotes the end of a line segment. Therefore, the red end vertex should be on the right descending bank.</li>
<li>Check that each cross section is digitized in the correct direction (start at the left descending bank and end on the right descending bank) before going on to the next step.</li>
<li>Ensure that riffle cross sections are digitized to the full width of the active floodplain. Edit each <code>riffle_floodplain</code> feature to ensure that it extends at least to the edge of the <code>Floodplain Mask</code> layer, but no further.</li>
<li>This ensures that each <code>riffle_floodplain</code> feature covers the entire floodplain, but does not extend too far into the uplands.<br />
</li>
<li>For a site with multiple reaches, riffle cross sections must be uniquely numbered across all reaches. The <code>Seq</code> field values of riffle cross sections should not repeat within the reaches of a site.</li>
<li>The downstream-most cross section in the site should be numbered starting with the <code>Seq</code> field value of 1 and increase moving upstream.</li>
<li>If necessary, use the <code>13a - XS Resequence</code> tool to set the starting <code>Seq</code> value for each reach.</li>
<li>Set the <code>Seq</code> field value for each upstream reach to the upstream-most value (i.e., the highest <code>Seq</code> value of the downstream reach’s riffle cross section FC) of the downstream reach. For example, set the <code>Seq</code> of the Reach-2 riffle cross section FC to 18 if the maximum value of Reach-1’s riffle cross section FC <code>Seq</code> field is 17.</li>
</ul>
</div>
<div id="assign-cross-section-ids" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Assign Cross Section IDs</h3>
<p>The purpose of this step is to ensure that riffle cross section identifiers are properly assigned. Assignment of cross section unique identifiers is critical for later tools to uniquely identify each cross section.</p>
<ul>
<li>Assign integer values to the <code>Seq</code> field starting with one. Begin numbering at the downstream extent of the study area and moving upstream.</li>
</ul>
</div>
<div id="calculate-cross-section-watershed-area-1" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Calculate Cross Section Watershed Area</h3>
<p>The purpose of this step is to calculate the watershed area for each riffle cross section.</p>
<ul>
<li>From the study area geodatabase, use the <code>watershed_contributing_area</code> raster that covers the entire contributing watershed of the study area.<br />
</li>
<li>Use the ERSI <code>Clip Raster</code> tool to clip the <code>watershed_contributing_area</code> raster to <code>stream_network_buffer</code> to speed tool run time.</li>
<li>Add the <code>contributing_area_buffer</code> raster to a map and symbolize with a “hot-cold” stretch renderer.</li>
<li>Add the <code>flowline</code> and regular cross section features classes to the map. Place them on top of the <code>contributing_area_buffer</code> raster.</li>
<li>Determine the maximum distance from the intersection of each cross section and the <code>flowline</code> to the nearest pixel of high flow in the <code>contributing_area_buffer</code> raster. This value will be used for the <code>snap_distance</code> in the next step.</li>
<li>Use the <code>12 - XS Watershed Area</code> tool to calculate the watershed area for each cross section.</li>
<li>For the <code>flow_accum</code> parameter, use the <code>contributing_area_buffer</code> raster.</li>
<li>For the <code>snap_distance</code> parameter, use the distance you calculated in a previous step.</li>
</ul>
</div>
<div id="calculate-cross-section-river-position-1" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Calculate Cross Section River Position</h3>
<p>The purpose of this step is to calculate the river position for each riffle cross section.</p>
<ul>
<li>Use the <code>13 - XS River Position</code> tool to calculate the distance to the mouth of the river for each cross section.</li>
<li>The river position of each cross section will be used in later steps to calculate several channel parameters (i.e., gradient, sinuosity).</li>
</ul>
</div>
<div id="create-riffle-channel" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Create Riffle Channel</h3>
<p>The purpose of this step is to edit the lateral extent of the <code>riffle_channel</code> FC to just cover the initial channel extent. This allows a more detailed examination of the channel area.</p>
<ul>
<li>In the Catalog window, make a copy of the <code>riffle_floodplain</code> feature class and name it <code>riffle_channel</code>.</li>
<li>Edit each <code>riffle_channel</code> feature to ensure that it extends at least to the edge of the <code>Channel Mask</code> layer, but no further. This ensures that each <code>riffle_channel</code> feature covers the entire channel, but does not extend too far into the floodplain.</li>
<li>Use snapping to ensure that vertices of the <code>riffle_channel</code> features are coincident with the overlapping <code>riffle_floodplain</code> features.</li>
</ul>
</div>
<div id="calculate-cross-section-points-1" class="section level3">
<h3><span class="header-section-number">6.1.6</span> Calculate Cross Section Points</h3>
<p>The purpose of this step is to convert each riffle cross section into a set of evenly stationed points and assign DEM and detrended elevation values.</p>
<ul>
<li>Use the <code>14 - XS Points</code> tool to calculate cross section station points for each cross section.</li>
<li>The <code>station_distance</code> parameter should be set to approximately the resolution of the DEM. For example, if the DEM has a cell size of 1 foot (0.3048 meter), set the <code>station_distance</code> to that distance (using the linear units of the coordinate system used for the project’s vector data).</li>
<li>This tool creates a new feature class named <code>&lt;cross section FC name&gt;_points</code>.</li>
<li>Repeat this step for both the <code>riffle_floodplain</code> and <code>riffle_channel</code> FCs.</li>
</ul>
</div>
<div id="calculate-initial-cross-section-l2-dimension" class="section level3">
<h3><span class="header-section-number">6.1.7</span> Calculate Initial Cross Section L2 Dimension</h3>
<p>The purpose of this step is to calculate the initial L2 dimensions for the the riffle cross sections for each reach. Repeat the following steps for both the <code>riffle_floodplain</code> FC and the <code>riffle_channel</code> FC.</p>
<p><strong>Determine the moving window size</strong><br />
Many stream metrics are scale dependent, meaning these metrics are affected by the size of the moving window used in their calculation. To determine the appropriate size of the moving window for this reach, use the following steps:</p>
<ul>
<li>Many stream metrics are typically calculated using a moving window size equal to two meander wavelengths.</li>
<li>Using the initial <code>Channel Mask</code> layer that you created earlier, estimate the typical bankfull width for the reach.</li>
<li>Estimate the length of two meander wavelengths by multiplying the bankfull width estimated in the last step by 10 (e.g., 30ft bankfull width * 10 = 300ft, two meander wavelengths).<br />
</li>
<li>Determine how many cross sections two meander wavelengths represent. For example, if riffle cross sections are spaced about 300ft apart, then two meander wavelengths would be 1 riffle cross section (i.e., 300ft / 300ft between riffle cross sections).</li>
</ul>
<p><strong>Calculate Initial L2 Dimensions</strong></p>
<ul>
<li>Use the <code>15b - XS Dimensions, Level 2</code> tool to calculate L2 dimensions.</li>
<li>Set the <code>xs_fc</code> parameter to the regular cross sections FC you created in a previous step.</li>
<li>Set the <code>lead_n</code> parameter to the number of upstream cross sections that you calculated in a previous step.</li>
<li>If the elevations in the channel seem noisy, check the <code>use_smoothing</code> parameter and set the <code>loess_span</code> parameter to a value between 0-1.</li>
<li>Confirm that the <code>vert_units</code> of the DEM are in feet.</li>
</ul>
<p><strong>Confirm the degree of smoothing</strong></p>
<ul>
<li>Use a chart to verify the choice of the smoothing <code>loess_span</code> parameter in the <code>*_dims_L2</code> FC.</li>
<li>Right-click on the <code>*_dims_L2</code> FC in the map table of contents and select “Create Chart”, and select “Line”. In the <code>Date or Number</code> dropdown, choose the field <code>POINT_M</code>. In the <code>Aggregation</code> dropdown, choose <code>None</code>. In the <code>Numeric field(s)</code> checklist, check the boxes next to <code>Z</code> and <code>Z_smooth</code>. Click the <code>Apply</code> button to view the chart.</li>
<li>Visually assess the degree of smoothing. The smoothing should be high enough to eliminate LiDAR elevation noise, but not so high as to eliminate meaningful channel elevation change.</li>
<li>If the smoothing is not ideal, re-run the tool and adjust the <code>loess_span</code> parameter.</li>
</ul>
<hr />
</div>
</div>
<div id="estimate-bankfull" class="section level2">
<h2><span class="header-section-number">6.2</span> Estimate Bankfull</h2>
<p>The purpose of this stage is to estimate the detrended bankfull elevation for the base year for each reach. This report conducts a sensitivity analysis using the regional curve estimates of channel dimensions across a range of elevation values to identify the detrended bankfull elevation value that best fits the regional curve estimate.</p>
<div id="run-the-estimate-bankfull-report" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Run the Estimate Bankfull Report</h3>
<p>The purpose of this step is to run the Estimate Bankfull report for each reach.</p>
<ul>
<li>In the <code>Reports</code> toolset, use the <code>Estimate Bankfull</code> tool to produce the Estimate Bankfull Report.</li>
<li>For the <code>stream</code> parameter, use the value of the <code>ReachName</code> field used in the <code>flowline</code> FC.</li>
<li>For the <code>flowline_fc</code> parameter, enter the <code>flowline</code> FC for the base year survey.</li>
<li>For the <code>xs_dims_fc</code> parameter, use the <code>riffle_channel_dims_L2</code> FC calculated for the base year.</li>
<li>The <code>xs_points_ch_*</code> parameter set requires a <code>riffle_channel_points</code> FC. These FCs should be entered with the FC for the most recent survey first (i.e., the base year) and then the previous surveys in reverse chronological order (e.g., 2016, 2010, 2006).</li>
<li>The <code>xs_points_fp_*</code> parameter set requires a <code>riffle_floodplain_points</code> FC. These FCs should be entered with the FC for the most recent survey first (i.e., the base year) and then the previous surveys in reverse chronological order (e.g., 2016, 2010, 2006).</li>
<li>The <code>survey_name_*</code> parameters are used to label the surveys in maps and graphs.</li>
<li>The FCs and labels used for the <code>xs_points_*</code> and <code>survey_name_*</code> parameters must be entered in the same order (e.g., 2016, 2010, 2006) in each set of numbered parameters.</li>
<li>For the <code>features_fc</code> parameter, enter the <code>features</code> FC for the base year survey.</li>
<li>For the <code>dem</code> parameter, enter the DEM for the base year survey.</li>
<li>For the <code>regions</code> parameter, select the regions to use for estimating the bankfull water surface elevation.</li>
<li>For the <code>from_elevation</code> parameter, specify the lowest detrended elevation value to use for sensitivity analysis.</li>
<li>For the <code>to_elevation</code> parameter, specify the highest detrended elevation value to use for sensitivity analysis.</li>
<li>For the <code>by_elevation</code> parameter, specify the value to increment the sequence between <code>from_elevation</code> and <code>to_elevation</code>.</li>
<li>The three values (i.e., <code>from_elevation</code>, <code>to_elevation</code>, and <code>by_elevation</code>) define the sequence used for the sensitivity analysis.</li>
<li>For the <code>bf_estimate</code> parameter, specify the detrended elevation value that represents the bankfull water surface elevation.</li>
</ul>
</div>
<div id="perform-qa-1" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Perform QA</h3>
<p>The purpose of this step is to use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected.</p>
<ul>
<li>Follow the instructions in the QA Checklist Chapter, <a href="qa-checklist.html#estimate_bankfull_report_qa">Estimate Bankfull Report</a> section, to verify that the reports have run correctly.</li>
<li>Make the required changes suggested in the QA Checklist and rerun the report.</li>
<li>Repeat these QA iterations until the reports are correct.</li>
</ul>
</div>
<div id="determine-bankfull-elevation" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Determine Bankfull Elevation</h3>
<p>The purpose of this step is to interpret the Estimate Bankfull Report to determine the final detrended bankfull elevation to be used for the rest of the analysis for each reach. The <code>Estimate Bankfull</code> tool is intended to be run iteratively, testing the fit of a range of detrended bankfull elevations against different regional curves.</p>
<ul>
<li>From the initial Estimate Bankfull Report, use the Bankfull Elevation Goodness of Fit sensitivity analysis graph to examine the effect of choice of detrended bankfull elevation on the error statistic.</li>
<li>Identify the detrended bankfull elevation that minimizes error on the Bankfull Elevation Goodness of Fit sensitivity analysis graph.</li>
<li>In the example figure below, the detrended bankfull elevation of 104 ft. minimizes error (y-axis Mean Average Error) for both area and depth. Although 102 ft. appears to be the detrended elevation that minimizes error for width, 104 ft. does a better job for area and depth. Using the logic of “best two out three”, a detrended bankfull elevation of 104 ft. could be chosen for this reach and will be used for later steps in this analysis. However, other criteria could be used depending on the goals of your study.</li>
<li>Rerun the report using the value chosen in the previous step.</li>
</ul>
<div class="figure"><span id="fig:unnamed-chunk-4"></span>
<img src="images/reach_gof_graph.png" alt="Bankfull Elevation Goodness of Fit" width="100%" />
<p class="caption">
Figure 6.1: Bankfull Elevation Goodness of Fit
</p>
</div>
</div>
<div id="create-bankfull-area" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Create Bankfull Area</h3>
<p>The purpose of this step is to use the final bankfull elevation determined in the previous step to derive a final <code>bankfull_area</code> polygon for each reach.</p>
<ul>
<li>From the final Estimate Bankfull Report, use the detrended bankfull elevation identified in the last step. In the example above, this value was 104 ft.</li>
<li>Use the <code>08 - Water Surface Extent</code> tool to extract a bankfull area polygon. This tool creates a new polygon feature class named <code>banks_raw_xxx</code>, where xxx is the detrended elevation specified.</li>
<li>The <code>banks_raw_xxx</code> FC must be edited to select only the polygons that represent the bankfull area polygon(s).</li>
<li>Open the attribute table for the <code>banks_raw_xxx</code> FC and use advanced sorting to sort first by <code>gridcode</code> and then by <code>Shape_Area</code>.</li>
<li>Polygons with <code>gridcode</code> = 1 are polygons inundated at the detrended elevation.</li>
<li>Typically, the polygons with the largest area represent the channel.</li>
<li>Begin by selecting <code>gridcode</code> = 1 polygons with the largest area until the entire bankfull area is selected.</li>
<li>Export these selected features to a new feature class named <code>bankfull_area</code>.</li>
<li>Delete the <code>banks_raw_xxx</code> FC.</li>
</ul>
</div>
<div id="create-banklines" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Create Banklines</h3>
<p>The purpose of this step is to convert the <code>bankfull_area</code> polygon into polylines and edit into a <code>banklines</code> FC for each reach. The <code>banklines</code> feature class will have two records, one representing the left descending bankline and another the right descending bankline for the stream reach.</p>
<ul>
<li>Use the ESRI <code>Polygon To Line</code> tool to convert the <code>bankfull_area</code> polygon FC to a new polyline FC named <code>banklines</code>.</li>
<li>Add the following fields to the <code>banklines</code> FC:
<ul>
<li><code>ReachName</code>: Text (50) - The purpose of this field is to store the reach name.</li>
<li><code>bank_id</code>: Long Integer - The purpose of this field is to uniquely identify each bank.</li>
<li><code>bank</code>: Text (50) - The purpose of this field is to designate which bank is the <code>right descending</code> bank and which is the <code>left descending</code> bank.</li>
</ul></li>
<li>Start editing the <code>banklines</code> FC.</li>
<li>Use the ESRI <code>Explode Multipart Feature</code> tool to explode any multipart line feature in the <code>banklines</code> FC.</li>
<li>Add the <code>flowline</code> FC to the map.</li>
<li>Use the ESRI <code>Split Tool</code> to split the line features at the downstream and upstream ends of the <code>flowline</code> FC.</li>
<li>The features in the <code>banklines</code> FC should not extend past the end of the <code>flowline</code> feature.</li>
<li>Use the ESRI <code>Split Tool</code> to trim any tributaries from the <code>banklines</code> FC.</li>
<li>The goal of this step is to have only two features, one representing the left descending bankline and another the right descending bankline. Delete all other line features.</li>
<li>Ensure that the banklines are digitized in the upstream direction (like a <code>flowline</code> feature). Edit the <code>banklines</code> FC to ensure that each bankline is digitized beginning with the downstream end and digitized upstream.</li>
<li>While editing, select a <code>bankline</code> feature, choose to edit vertices. Ensure that the red endpoint is at the upstream end of each bankline.</li>
<li>Use the “Reverse Direction” command (aka flip) to ensure each bankline is digitized in the upstream direction.</li>
<li>Check that each bankline is digitized in the upstream direction (red endpoint at the upstream end) before going on to the next step.</li>
<li>In the <code>ReachName</code> field enter the reach name.</li>
<li>In the <code>bank</code> field, enter the string <code>right descending</code> or <code>left descending</code> to designate which bank each line represents.</li>
<li>In the <code>bank_id</code> field enter a <code>1</code> for the <code>right descending</code> bank and <code>2</code> for the <code>left descending</code> bank.</li>
</ul>
</div>
<div id="create-final-centerline" class="section level3">
<h3><span class="header-section-number">6.2.6</span> Create Final Centerline</h3>
<p>The purpose of this step is to create a stream centerline. The centerline represents the rough midline of the stream between the banklines.</p>
<ul>
<li>Use the <code>10 - Centerline</code> tool to create a <code>centerline</code> polyline feature class representing the stream midline at the bankfull water surface elevation.</li>
</ul>
<hr />
</div>
</div>
<div id="calculate-final-l2-cross-section-geometry" class="section level2">
<h2><span class="header-section-number">6.3</span> Calculate Final L2 Cross Section Geometry</h2>
<p>The purpose of this stage is to use the bankfull elevation determined in the last stage to calculate the final level 2 cross section dimensions for the base year for each reach.</p>
<div id="calculate-final-cross-section-l2-dimensions" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Calculate Final Cross Section L2 Dimensions</h3>
<p>The purpose of this step is to calculate the final L2 dimensions for the regularly spaced and riffle cross section FCs for each reach. Repeat the following steps for regular spaced cross section FC, the <code>riffle_floodplain</code> FC, and the <code>riffle_channel</code> FC.</p>
<p><strong>Determine the moving window size</strong><br />
Many stream metrics are scale dependent, meaning these metrics are affected by the size of the moving window used in their calculation. To determine the appropriate size of the moving window for this reach, use the following steps:</p>
<ul>
<li>Many stream metrics are typically calculated using a moving window size equal to two meander wavelengths.</li>
<li>Using the <code>bankfull_area</code> FC, estimate the typical bankfull width for the reach.</li>
<li>Estimate the length of two meander wavelengths by multiplying the bankfull width estimated in the last step by 10 (e.g., 30ft bankfull width * 10 = 300ft, two meander wavelengths).<br />
</li>
<li>Determine how many cross sections two meander wavelengths represent.</li>
<li>For riffle cross section for example, if they are spaced about 300ft apart, then two meander wavelengths would be 1 riffle cross section (i.e., 300ft / 300ft between riffle cross sections).</li>
<li>For regular cross section for example, if they are spaced about 100ft apart, then two meander wavelengths would be 3 regular cross sections (i.e., 300ft / 100ft between regular cross sections).</li>
</ul>
<p><strong>Calculate Final L2 Dimensions</strong></p>
<ul>
<li>Delete the initial Level 2 dimensions <code>*_dims_L2</code> FCs created earlier in Level 2.</li>
<li>Use the <code>15b - XS Dimensions, Level 2</code> tool to calculate final L2 dimensions.</li>
<li>Set the <code>xs_fc</code> parameter to the cross sections FC.</li>
<li>Set the <code>lead_n</code> parameter to the number of upstream cross sections that you calculated in a previous step depending on the type of cross section (i.e., regular cross section, riffle cross section).</li>
<li>If the elevations in the channel seem noisy, check the <code>use_smoothing</code> parameter and set the <code>loess_span</code> parameter to a value between 0-1.</li>
<li>Confirm that the <code>vert_units</code> of the DEM are in feet.</li>
</ul>
<p><strong>Confirm the degree of smoothing</strong></p>
<ul>
<li>Use a chart to verify the choice of the smoothing <code>loess_span</code> parameter in the <code>*_dims_L2</code> FC.</li>
<li>Right-click on the <code>*_dims_L2</code> FC in the map table of contents and select “Create Chart”, and select “Line”. In the <code>Date or Number</code> dropdown, choose the field <code>POINT_M</code>. In the <code>Aggregation</code> dropdown, choose <code>None</code>. In the <code>Numeric field(s)</code> checklist, check the boxes next to <code>Z</code> and <code>Z_smooth</code>. Click the <code>Apply</code> button to view the chart.</li>
<li>Visually assess the degree of smoothing. The smoothing should be high enough to eliminate LiDAR elevation noise, but not so high as to eliminate meaningful channel elevation change.</li>
<li>If the smoothing is not ideal, re-run the tool and adjust the <code>loess_span</code> parameter.</li>
</ul>
</div>
<div id="add-modeled-water-surface-elevation" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Add Modeled Water Surface Elevation</h3>
<p>The purpose of this optional step is to add an HEC-RAS hydraulic model estimated water surface elevation (if available) to a cross section dimension feature class.</p>
<ul>
<li>Use the <code>16 - XS RAS Watersurface</code> tool to add a modeled watersurface to the input cross section feature class.</li>
<li>Use the <code>RAS_model_name</code> to distinguish between multiple RAS model scenarios.</li>
</ul>
<hr />
</div>
</div>
<div id="run-report-1" class="section level2">
<h2><span class="header-section-number">6.4</span> Run Report</h2>
<p>The purpose of this stage is to produce the Level 2 report for each reach.</p>
<div id="run-the-l2-report" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Run the L2 Report</h3>
<p>The purpose of this step is to run the L2 report for each reach.</p>
<ul>
<li>In the Reports toolset, use the <code>Level 2 Report</code> tool to produce the Level 2 Report.</li>
<li>For the <code>stream</code> parameter, use the value of the <code>ReachName</code> field used in the <code>flowline</code> FC.</li>
<li>For the <code>flowline_fc</code> parameter, enter the <code>flowline</code> FC for the base year survey.</li>
<li>For the <code>xs_dims_fc</code> parameter, use the <code>*_dims_L2</code> FC calculated for the regular cross sections of the base year.</li>
<li>The <code>xs_points_*</code> parameters should be entered with the FC for the most recent survey first (i.e., the base year) and then the previous surveys in reverse chronological order (e.g., 2016, 2010, 2006).</li>
<li>The <code>survey_name_*</code> parameters are used to label the surveys in maps and graphs.</li>
<li>The FCs and labels used for the <code>flowline_points_*</code>, <code>xs_points_*</code>, and <code>survey_name_*</code> parameters must be entered in the same order (e.g., 2016, 2010, 2006) in each set of numbered parameters.</li>
<li>For the <code>dem</code> parameter, enter the DEM for the base year survey.</li>
<li>For the <code>banklines_fc</code> parameter, enter the <code>banklines</code> FC created for the base year survey.<br />
</li>
<li>For the <code>features_fc</code> parameter, enter the <code>features</code> FC for the base year survey.</li>
<li>For the <code>bf_estimate</code> parameter, specify the detrended elevation value that represents the bankfull water surface elevation.</li>
<li>For the <code>regions</code> parameter, select the regions to use for estimating the bankfull water surface elevation.</li>
</ul>
</div>
<div id="perform-qa-2" class="section level3">
<h3><span class="header-section-number">6.4.2</span> Perform QA</h3>
<p>The purpose of this step is to use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected.</p>
<ul>
<li>Follow the instructions in the QA Checklist Chapter, <a href="qa-checklist.html#L2_report_qa">Level 2 Report</a> section, to verify that the reports have run correctly.</li>
<li>Make the required changes suggested in the QA Checklist and rerun the report.</li>
<li>Repeat these QA iterations until the reports are correct.</li>
</ul>
<hr />
</div>
</div>
<div id="determine-next-steps-1" class="section level2">
<h2><span class="header-section-number">6.5</span> Determine Next Steps</h2>
<p>The purpose of this step is to determine what further steps need to be taken.</p>
<ul>
<li>Review the results of the Level 2 Report and determine if the project goals require proceeding to developing the Level 3 analysis.</li>
</ul>
<hr />

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-luna_bergere_leopold_river_1957">
<p>Luna Bergere Leopold, and M. Gordon Wolman. 1957. “River Channel Patterns: Braided, Meandering, and Straight.” USGS Numbered Series 282-B. Washington, D.C.: U.S. Geological Survey. <a href="https://pubs.usgs.gov/pp/0282b/report.pdf">https://pubs.usgs.gov/pp/0282b/report.pdf</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="level-1-workflow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="level-3-workflow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05b-Level-2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["FG-User-Manual.pdf", "FG-User-Manual.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
