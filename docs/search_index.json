[["index.html", "FluvialGeomorph User Manual Preface 0.1 Abstract 0.2 Distribution Statement 0.3 Unit Conversion Factors 0.4 Notation List", " FluvialGeomorph User Manual Michael Dougherty, Geographer, US Army Corps of Engineers, Rock Island District Christopher Haring, Geomorphologist/Research Physical Scientist, Coastal Hydraulics Laboratory, U.S. Army Corps of Engineers 2020-12-14 Preface Funding for development and maintenance of FluvialGeomorph has been provided by the following US Army Corps of Engineers (USACE) programs: Ecosystem Management and Restoration Research Program (EMRRP). Regional Sediment Management Program (RSM) Mississippi River Geomorphology and Potamology Program (MRG&amp;P) Flood Risk Management Program (FRM) 0.1 Abstract The abstract appears on the reverse side of the title page. It summarizes the research problem, project objective, and outcome of the investigation. It should run no more than 200 words. 0.2 Distribution Statement Approved for public release; distribution is unlimited 0.3 Unit Conversion Factors Unit Conversion Factors Multiply By To Obtain feet 0.3048 meters miles 1.60934 kilometers square miles 2.58999 square kilometers 0.4 Notation List "],["introduction.html", "Chapter 1 Introduction 1.1 Background 1.2 Objective 1.3 Approach", " Chapter 1 Introduction 1.1 Background The background section defines the problem addressed by the research and its impact on the U.S. Army. It cites related previous studies and explains why the current research is necessary. It also may present other background information that provides essential context for the reader. Examples include the following: controlling regulations or legal requirements prospective users of the report or the technology. hi-res terrain opportunity, but not enough tools historic field survey versus geomorphometric automated methods The purpose of regional curves and why they are important for rapid watershed assessment vison for what the analysis can be used to accomplish 1.2 Objective The objective is a concise statement of what the research is intended to accomplish. Goals * Provide a USACE Planning method for rapid watershed assessments * Develop rapid watershed assessment tools using high resolution terrain data and existing fluvial geomorphic principles * Develop a USACE Ecological Planning model based on rapid watershed assessment metrics to define restoration and mitigation benefits Objectives * Develop a suite of planning analysis tools to rapidly assess and identify sediment sources, pathways, and sinks for watershed analysis. * Use existing geomorphic principles to develop metrics for analyzing LiDAR-derived channel, floodplain, valley, and watershed characteristics. * Develop an approach to relate channel, floodplain, valley, and watershed characteristics to Ecosystem Restoration (ER) habitat evaluation and benefits. 1.3 Approach The approach section explains the research methodology. If the methodology is complex or otherwise warrants a chapter of its own, the approach section may simply cross-reference the reader to the appropriate chapter. "],["install.html", "Chapter 2 Install 2.1 Software Requirements 2.2 Install TauDEM 2.3 Install FluvialGeomorph 2.4 Install Tutorial Data", " Chapter 2 Install This chapter will describe the process for installing and configuring the FluvialGeomorph software components. 2.1 Software Requirements The following summary of the software that must be installed to use the FluvialGeomorph toolbox. The rest of this chapter will describe how to complete these installations. R Statistical Computing Language (3.6.3+ recommended) RStudio Desktop (1.3+ recommended), optional TauDEM (5.3.7+ recommended) ArcGIS Pro (2.6+ recommended) or ArcGIS Desktop (10.8+ recommended) FluvialGeomorph toolbox latest version 2.1.1 Install R R is a statistical computing environment required to perform calculations and report generation. Ensure that R is installed. R version 3.6.3 or greater is recommended. 2.1.2 Install RStudio Rstudio is an Integrated Development Environment (IDE) for R that streamlines development and troubleshooting. Ensure that Rstudio is installed. RStudio version 1.3 or greater is recommended. 2.2 Install TauDEM Install the latest version of TauDEM, v5.3.7. 2.2.1 Install ArcGIS Pro ArcGIS Pro is the GIS environment where the FMG data will be developed and the toolbox will be run from. Ensure that ArcGIS Pro is installed. ArcGIS Pro version 2.6 or greater is recommended. 2.2.2 Download the arcgisbinding package The arcgisbinding R package allows ArcGIS Pro and ArcMap to read and write to R. Installing it through ArcGIS Pro also enables it for use in ArcMap as well. Note: The ArcGIS R-bridge does not yet support R 4.0 for use in ArcGIS Pro or ArcMap geoprocessing tools. See the NEWS for more details on version compatibility. Please manually download the specified version using these instructions. Navigate to the following URL: https://github.com/R-ArcGIS/r-bridge In the Releases section on the middle-right side of the page, click the + xx releases link. Download the v1.0.1.239 version. This file is named: arcgisbinding_1.0.1.239.zip Note the location of the file you just downloaded. We will use it in a following step. 2.2.3 Install the arcgisbinding package The arcgisbinding R package is developed and maintained by ESRI to support the import and export of GIS data into R. In ArcGIS Pro, on the top menu, click Project, and click Options on the left menu. In the Options dialog box, click Geoprocessing on the left menu. On the Geoprocessing page, scroll down to the R-ArcGIS Support section. In the R-ArcGIS Support section, verify the installed R version for ArcGIS to use. Select an R version in the 3.6.x series. Below the Detected R home directories drop-down menu, you will see the arcgisbinding package section. From the drop-down, choose the Update from file option. Navigate to the arcgisbinding_1.0.1.239.zip file you downloaded in an earlier step and click the OK button. 2.3 Install FluvialGeomorph The code in the FluvialGeomorph-toolbox/ repository contains all of the files needed to use this ArcGIS toolbox. In the Releases section above on the right side of the page, click the green latest link. On the latest release page, use the Source code (zip) link to download a ZIP archive of the toolbox. Unzip the archive to your project folder. In ArcMap or ArcGIS Pro, navigate to the folder where you just unzipped the archive and you are ready to use this ArcGIS toolbox. 2.4 Install Tutorial Data "],["workflow.html", "Chapter 3 Workflow 3.1 Units of Analysis 3.2 Analysis Levels 3.3 Geodatabases 3.4 Derived Features 3.5 Project File Structure 3.6 Workflows 3.7 Quality Assurance", " Chapter 3 Workflow This chapter provides an overview of some of the workflows that can be used to perform a rapid watershed assessment using FluvialGeomorph. Through analyzing a wide range of project sites, we have created a standard analysis framework. This framework defines a series of standard analysis objects that are used in a regular process to perform different types of analysis. 3.1 Units of Analysis To help organize the workflow process we have defined several units of analysis: Project: These are the primary work units and correspond to projects that customers have requested for analysis. Customers define specific goals for each project that determine the specific workflow chosen. These goals define a project study area for each project. These project study areas typically consist of a particular watershed, a mainstem section of a named river, or a discrete stream reach. Site: Project areas are subdivided into sites. Sites are typically named tributaries and their subwatersheds within the project study area. Reach: Sites are further subdivided into reaches. Reaches are defined according to project goals and use conventional rules for specifying reaches (i.e., tributary confluence to confluence), significant infrastructure, changes in surficial geology, etc. Year: Since FluvialGeomorph analysis is based on LiDAR terrain surveys, the timing of the survey is a critical factor in the analysis. LiDAR is a single point-in-time dataset. Since LiDAR can be collected periodically, our data structure must accommodate multiple distinct time periods for which channel dimensions are extracted. If there are multiple LiDAR surveys available for the project study area, the most recent survey is referred to as the base year. 3.2 Analysis Levels We have defined a standard workflow that is modular, allowing analysts to prescribe and customers to purchase progressively more detailed analysis as needed. The workflow is organized according to the following levels: Level 1: Extract basic channel dimensions. Level 2: Extract bankfull channel dimensions. Level 3: Extract planform dimensions. 3.3 Geodatabases The FluvialGeomorph workflow was designed around a standard set of objects organized into a standard set of geodatabases. Study Area Geodatabase: This type of geodatabase stores feature classes (FC) that apply to the entire project study area or site. The workflow begins with developing FCs that define the project study area, Digital Elevation Models (DEM), derived stream network, etc. If there are multiple LiDAR surveys for the project study area, a separate study area geodatabase representing each survey is created beginning with the base year. Reach Geodatabase: This type of geodatabases stores FCs that apply to a specific reach. The FluvialGeomorph tools create a standard set of FCs. Creating a separate geodatabase for each reach allows these standard FCs to be created for each reach unit of analysis. If there are multiple LiDAR surveys for the project study area, a separate reach geodatabase representing each survey is created beginning with the base year. 3.4 Derived Features The definition of a common set of derived features is an important step in standardizing any workflow. The standard FluvialGeomorph database objects form a tightly linked set of features that work together in a particular order to accomplish the analysis. See the FluvialGeomorph Tech Manual for a detailed description of each of these standard FCs. 3.5 Project File Structure Establishing a standard storage structure for all project data is an important quality control step. A standard folder structure has the following benefits: Clearly defined functional roles for each storage location reduces ambiguity and confusion. Predictability reduces errors. Standard structure allows analysts to move between projects more easily. The following folder structure is recommended to organize all project data: Project_Name  Sites   01_Site_Name    Data    Reach1_year1.gdb    Reach1_year2.gdb    Reach2_year1.gdb    Reach2_year2.gdb    ...    Elevation    year1.gdb    year2.gdb    ...    Exports    Maps    Reports   02_Site_Name  ...  Elevation   Year1   year1.gdb    LAS   Year2  year2.gdb   LAS  ...  Exports  Maps Site Folders: Site folders are used to store all of the files for each site. Each site in the project study area gets its own folder. Site folder order can be controlled by prefixing a number to each site name. Elevation Folders: The elevation folders are used to store all of the data required to create a DEM for each LiDAR survey event. A LAS subfolder is used to hold all of the .las files for each LiDAR survey. Since these datasets can be massive, the idea is to separate these data into their own folder to improve data management. Once the terrain data are processed, only derived DEMs are then copied to the geodatabases in the Data folders. Site Data Folders: The site data folders are used to store all of the site study area and reach geodatabases. Reports: The Reports folders are used to store the reports created by tools for each reach. Maps: The Maps folders are used to store map documents for a given project or site. Exports Folders: The Exports folders are used to store static .pdf map documents exported from map projects for a given project or site. 3.6 Workflows The FluvialGeomorph workflow has been organized using the following hierarchical grouping to help analysts better understand how to perform the analysis and what is being done during each step of the process. All workflow steps are sequential and build on the outputs of previous steps. Levels: The top hierarchical grouping of the workflow. Levels are distinguished by the degree of fluvial geometric detail and metrics that will be derived. Levels 2 and 3 are optional. Stages: The second hierarchical grouping of the workflow. Each level is subdivided into stages. Stages are mostly a conceptual grouping of steps to accomplish a specific objective in the analysis chain. Steps: The third hierarchical grouping of the workflow. Stages are subdivided into steps. Steps typically involve running tools, manual editing, and performing quality assurance checks. Tools: Tools are the lowest hierarchical grouping of the workflow. Tools perform operations that are suitable for automation. 3.6.1 Level 1 The purpose of this level is to extract basic channel dimensions. This section will provide a brief overview of the Level 1 (L1) workflow. Figure 3.1: Level 1 Workflow Diagram Create Terrain: The purpose of this stage is to develop the terrain models for the project study area for all available LiDAR surveys. Acquire Point Cloud - Identify the elevation data steward and download or transfer the LiDAR point cloud data on an external drive. Derive DEM - Assemble the .las files into a LAS Dataset, apply class filters, and export as a raster DEM. Hydromodify DEM - Identify flow blockages along streams and burn these features into the DEM. Define Stream Reaches: The purpose of this stage is to derive a synthetic stream network for the entire project study area and define their contributing watersheds. Calculate Contributing Area - Calculate the flow accumulation model for the DEM. Derive Stream Network - Use the flow accumulation model to derive the synthetic flow stream_network FC for the project study area. Define Reaches - Subdivide the project study area stream_network FC into a set of analysis reaches. Delineate Watersheds - Use the flow accumulation model to delineate the watersheds for all project study area reaches. Derive Flowline: The purpose of this stage is to derive a flowline, for each reach and survey event. Derive Flowline - Develop the flowline FC for each reach and survey event. Create Flowline Points - Create the flowline_points FC for each reach and survey event. Define Initial Floodplain and Channel Extent: The purpose of this stage is to define the initial floodplain and channel extent, for each reach and survey event. Detrend DEM - Use the flowline_points FC to develop a relative elevation model for each reach and survey event. Estimate Initial Channel Extent - Use the detrend DEM to interactively flood the channel to make an initial estimate of the detrended bankfull elevation. Estimate Initial Floodplain Extent - Use the detrend DEM to interactively flood the active floodplain to make an initial estimate of the detrended floodplain elevation. Calculate Channel Slope Raster - Calculate the slope raster of the initial channel extent area. Create Regular Cross Section Geometry: The purpose of this stage is to create regularly spaced cross sections and calculate dimensions, for each reach and survey event. Create Regular Cross Sections - Create regularly spaced cross sections along each reach. Calculate Cross Section Watershed Area - Calculate the watershed area for each regularly spaced cross section. Calculate Cross Section River Position - Calculate the river position for each regularly spaced cross section. Calculate Cross Section Points - Convert each cross section into a set of evenly stationed points and assign DEM and detrended elevation values. Calculate Cross Section L1 Dimensions - Calculate the L1 dimensions for the regularly spaced cross sections. Identify Features: The purpose of this stage is to identify salient features along each reach. Create Features - Identify the longitudinal position of noteworthy stream features for graph and map labeling. Run Report: The purpose of this stage is to run the Level 1 report for each reach. Run the Level 1 Report - Run the L1 report for each reach. Perform QA - Use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected. 3.6.2 Level 2 The purpose of this level is to extract bankfull channel dimensions. This section will provide a brief overview of the Level 2 (L2) workflow. Create Initial Riffle Geometry: The purpose of this stage is to identify and map riffle cross sections and roughly estimate an initial bankfull elevation for the base year for each reach. Create Riffle Floodplain - Identify riffle locations and map these cross sections across the lateral extent of the floodplain for each reach. Calculate Cross Section Watershed Area - Calculate the watershed area for each riffle spaced cross section. Calculate Cross Section River Position - Calculate the river position for each riffle cross section. Create Riffle Channel - Edit the lateral extent of the riffle_channel FC to just cover the initial channel extent. Calculate Cross Section Points - Convert each riffle cross section into a set of evenly stationed points and assign DEM and detrended elevation values. Calculate Initial Cross Section L2 Dimensions - Calculate the initial L2 dimensions for the the riffle cross sections for each reach. Estimate Bankfull: The purpose of this stage is to estimate the detrended bankfull elevation for the base year for each reach. Run the Estimate Bankfull Report - Run the Estimate Bankfull report for each reach. Perform QA - Use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected. Determine Bankfull Elevation - Interpret the Estimate Bankfull Report to determine the final detrended bankfull elevation to be used for the rest of the analysis for each reach. Create Bankfull Area - Use the final bankfull elevation determined in the previous step to derive a final bankfull_area polygon for each reach. Create Banklines - Convert the bankfull_area polygon into polylines and edit into a banklines FC for each reach. Calculate Final L2 Cross Section Geometry: The purpose of this stage is to use the bankfull elevation determined in the last stage to calculate the final level 2 cross section dimensions for the base year for each reach. Calculate Final Cross Section L2 Dimensions - Calculate the final L2 dimensions for the regularly spaced and riffle cross section FCs for each reach. Run Report: The purpose of this stage is to produce the Level 2 report for each reach. Run the L2 Report - Run the L2 report for each reach. Perform QA - Use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected. 3.6.3 Level 3 The purpose of this level is to extract planform dimensions. This section will provide a brief overview of the Level 3 (L3) workflow. Define Valley Line: The purpose of this stage is to define the valley trend line for the base year for each reach. Determine Final Floodplain Extent - Use the detrended bankfull elevation identified in L2 to delineate the active floodplain. Develop Candidate Valleylines - Through iterative smoothing of the flowline, create a set of candidate valleylines for each reach. Choose Final Valleyline - From the candidate valleylines, choose the one that best captures the overall valley trend line. Define Meander Loops: The purpose of this stage is to define meander loops and bends for the base year for each reach. Define Loop Points - Create a new FC named loop_points and use it to identify the start and end stream meander loops and bends. Derive Bankline Points - From the banklines derived in L2, convert to a set of points arranged along the banklines, assign elevations and loop and bend locations. Assign Cross Section Loops - Assign loop and bend identifiers to regularly spaced and riffle cross section FCs for each reach. Calculate L3 Cross Section Geometry: The purpose of this stage is to calculate the Level 3 dimensions for each reach. Calculate Cross Section L3 Dimensions - Calculate the L3 dimensions for the regularly spaced and riffle cross section FCs for each reach. Run Report: The purpose of this stage is to run the Level 3 report for each reach. Run the L3 Report - Run the L2 report for each reach. Perform QA - Use the QA Checklist to verify the reports have run correctly and identify any data mistakes that need to be corrected. 3.7 Quality Assurance This workflow contains a LOT of detailed steps! If everything isnt done just right, problems happen. So to help analysts stay on top of all of these details, we have adopted a layered approach to making sure everything gets done right. Here are the ways Task Tracking Spreadsheet: To guide analysts through this workflow, we have developed a task tracking spreadsheet to use to record progress through the analysis. This spreadsheet allows an analyst to record the completion of each of the steps outlined above, as well as key values used in the analysis. This spreadsheet can be stored in the site folder while data development progresses. Records in this spreadsheet can be periodically appended to a project or team level version to improve team communication on project progress. Check Tools: The FluvialGeomorph toolbox contains the Check toolset that allows the analyst to perform checks on the standard FluvialGeomorph FCs for basic rule compliance. If analysts have questions about if a specific FC is causing problems, these check tools can be used. Tool Error Messages: A series of low-level defensive programming checks have been implemented across all FluvialGeomorph functions and tools to help head-off problems. QA Checklist: The QA Checklist helps analysts review the reports created using the tools to identify and fix problems in the underlying derived data. See the QA Checklist chapter in this manual for details. "],["tutorial-data.html", "Chapter 4 Tutorial Data", " Chapter 4 Tutorial Data This chapter will describe how to download the tutorial data and configure your workspace. "],["geoprocessing.html", "Chapter 5 Geoprocessing 5.1 Create Terrain 5.2 Define Watershed Reaches 5.3 Detrend DEM 5.4 Define Initial Channel and Floodplain Extents 5.5 Map Riffles 5.6 Calculate Riffle Geometry 5.7 Estimate Bankfull 5.8 Identify Infrastructure 5.9 Define Valley Line 5.10 Define Meander Loops 5.11 Calculate Cross Section Geometry", " Chapter 5 Geoprocessing This chapter describes the geoprocessing steps required to extract channel geometry dimensions from a LiDAR derived digital elevation model (DEM). 5.1 Create Terrain 5.1.1 Develop Elevation Model The purpose of this step is to develop a DEM for the study area. Create a study_area polygon feature class that delineates the extent of the study area. Identify a source of high resolution elevation data for this study area. For this study area we used Illinois Height Modernization, ILHMP. Download a pre-made DEM for the study area. Determine if the DEM contains sufficient spatial resolution to observe detailed features (point bars, islands, riffles, gravel beds, etc.) within the channel. If detailed channel features can be discerned in the DEM, you may use this DEM for this analysis. If detailed channel features cannot be discerned in the pre-made DEM, the pre-made DEMs may have been hydro-flattened. Therefore, you will need to download the original point cloud datasets and build a DEM. Create LAS dataset of study area. Set the LAS Dataset projection to the coordinate system UTM (select appropriate Zone based on location of the study area), Datum: NAD83. Select LAS classes that contain non-vegetation points within the channel. Use the LAS Dataset to Raster tool to export to raster. Z-Factor: 3.28084 Cell assignment Type: IDW Void Fill Method: Natural Neighbor Cell size: 1 foot (0.3048 meters) Use the study_area feature class to clip the DEM to the desired study area. Edit this polygon to remove any elevation anomalies around the edges of the DEM. These anomalies are sometimes created by the LAS Dataset to Raster tool. 5.1.2 Elevation Model Hydro Modification The purpose of this step is to create a hydro-modified DEM to ensure proper water flow across the study area. Examine the stream channel through the study area and determine if there are any blockages to flow in the DEM. These blockages are typically built infrastructure such as road embankments where streams are conveyed through culverts or underground storm water structures. If there are flow blockages in the study area, create a new line feature class named cutlines to store terrain modifications that remove flow blockages. This feature class must be in the same coordinate system as the DEM being modified. In an edit session, identify human structures that block flow along the stream reach being studied. Draw a line beginning at the upstream side of the blockage to a point just downstream of the blockage. Use the 02 - Burn Cutlines tool to burn the cutlines features into the DEM. This tool creates the dem_hydro raster. 5.2 Define Watershed Reaches 5.2.1 Define Stream Reaches The purpose of this step is to create a synthetic flow network of streams for the study area. Use the 03 - Contributing Area tool to calculate the contributing area for the study area. If created, use the dem_hydro raster as input, otherwise use the original study area DEM. The processes parameter can be safely set to approximately 2 less than the number of cores on the computer running the tool. Use the 04 - Stream Network tool to create a synthetic stream network from the hydro-modified DEM. The processes parameter can be safely set to approximately 2 less than the number of cores on the computer running the tool. The threshold parameter should be set to a value of 200,000 to 500,000 depending on the study area. If the resulting stream_network is too dense (requiring a large amount of editing to remove extraneous tributaries), try rerunning the tool and increasing the threshold value. Conversely, if the resulting stream_network is too sparse (not enough of the stream network was delineated), try rerunning the tool and decreasing the threshold value. Edit the resulting stream_network feature class to remove all tributary streams that do not constitute the network that will be analyzed in this study. Edit the stream_network feature class to ensure that stream segments are represented by a single line and that there are no gaps in the steam network. Use the Field Calculator tool to set the Name field to the name of the site being analyzed. Failure to complete this step will cause the next tool run to fail. Use the 05 - Create Flowline tool to process the stream_network feature class that was just edited to produce a new flowline feature class. Use a smoothing tolerance from 5-20. The goal is produce a smooth flowline, but not remove too much resolution from the line (ensure the line remains in the channel and not cut into the floodplain). Edit the flowline feature class to ensure that the flowline is digitized beginning with the downstream end and digitized upstream. In an edit session, select the flowline, choose to edit vertices, and ensure that the red endpoint is at the upstream end of the flowline. Use the flip command to ensure flowline is digitized in the correct direction. 5.2.2 Extract Stream Reach Profile Points The purpose of this step is convert the flowline into a series of points along the stream. This tool takes the flowline feature class, converts it to a route, calculates the distance to the mouth of the river for all vertices, and creates a stream profile points feature class. The flowline feature class was created during the hydro modification process. Use the 06 Stream Profile Points tool to convert the flowline feature class into stream profile points. For this study, set the km_to_mouth parameter to 0 and the station_distance field to 1 meter. This tool will create a new feature class named flowline_points. 5.3 Detrend DEM 5.3.1 Detrend Elevation Model The purpose of this step is to produce a detrended DEM. A detrended DEM normalizes stream bank elevations for a given reach. Use the 07 - Detrend tool to create a detrended DEM for the study reach. For this study, set the buffer_distance field to 100 meters. 5.4 Define Initial Channel and Floodplain Extents 5.4.1 Delineate the Initial Channel Extent The purpose of this step is to use the detrended DEM to visually extract an initial channel extent polygon. The detrend DEM created in the last step can be used to iteratively explore different inundation extents derived from various water surface elevations. Add the detrend feature class to the map Table of Contents. Name this layer Channel Extent. On the Symbology tab of the Channel Extent layer, use the Classified renderer to classify the raster into 2 classes. Set the first class boundary to the detrended elevation that you would like to explore. Set the color of the first class (min value - detrended elevation) to blue and the color of the second class (detrended elevation - max value) to No Color. Set the transparency of the Channel Extent layer to 50%. Begin to delineate the channel extent by selecting a detrended elevation that inundates the channel up to at least the first terrace. The goal at this stage is to select a detrended elevation that captures the extent of the channel without spilling too much water into the floodplain. Once you discover which detrended elevation begins to allow water to access the floodplain, reduce the detrended elevation value slightly to keep the water in the channel. Try several detrended elevation values to help make the decision. When you have chosen a detrended elevation, use the 08 - Water Surface Extent tool to extract an initial channel extent area polygon. This tool creates a new polygon feature class named banks_raw_xxx, where xxx is the detrended elevation selected. This feature class must be edited to select the channel area polygon(s). Open the attribute table for the banks_raw_xxx feature class and use advanced sorting to sort first by gridcode and then by Shape_Area. Polygons with gridcode = 1 are polygons inundated at the detrended elevation. Typically, the polygons with the largest area represent the channel. Begin selecting gridcode = 1 polygons with the largest area until the entire channel area is selected. Export these selected features to a new feature class named initial_channel_extent. Delete the banks_raw_xxx feature class created in this section. 5.4.2 Create the Initial Channel Mask layer The purpose of this step is to create a layer that defines an area just beyond the initial channel extent. Add the detrend feature class to the map Table of Contents. Name this layer Channel Mask. In the symbology of this layer, change the renderer from stretched to classified. Set the number of classes to 2. In the classification dialog, set the break value between the two classes to about one to two feet higher than the initial bankfull extent estimate. A couple of feet above the initial bankfull extent estimate should define the extent of the just the channel. For example, if the initial bankfull extent was estimated at 102 detrended feet, the initial bankfull height estimate would be 2 feet. One foot higher than the 2 foot initial bankfull height estimate would therefore be 103 detrended feet. Set the transparency of the Channel Mask layer to 50%. 5.4.3 Create the Initial Floodplain Mask layer The purpose of this step is to create a layer that defines the an initial estimate of the floodplain inundation extent. Add the detrend feature class to the map Table of Contents. Name this layer Floodplain Mask. In the symbology of this layer, change the renderer from stretched to classified. Set the number of classes to 2. In the classification dialog, set the break value between the two classes to four times the initial bankfull extent estimate. Four times the initial bankfull extent estimate should define the extent of the active floodplain. For example, if the initial bankfull extent was estimated at 102 detrended feet, the initial bankfull height estimate would be 2 feet. Four times the 2 foot initial bankfull height estimate would therefore be 108 detrended feet. Set the transparency of the Floodplain Mask layer to 50%. 5.4.4 Create Channel Slope Raster The purpose of this step is to create a channel slope raster that can be used in the visual identification of riffle locations in following step. Use the 09 - Channel Slope tool to calculate a raster of the channel slope. Use the intitial_channel_extent polygon created earlier to define the channel area within which the slope raster will be calculated. This tool creates a new feature class named channel_slope. 5.5 Map Riffles The purpose of this step is to identify and map riffle locations. Riffles will be used in later steps to determine the bankfull elevation from gage stage discharge relationships. 5.5.1 Map Riffle Cross Sections The purpose of this step is to identify the location of riffles in a stream reach. Riffle locations are identified using the channel_slope raster calculated in the last step (and confirmed with high resolution aerial imagery). In the channel_slope raster, pools appear as relatively smooth areas of low slope due to the absence of LiDAR points (deep water absorbs laser pulses). Shallow water riffles appear as highly textured areas of relatively higher slope between pools due to the higher number of LiDAR points from the exposed bed material. Create a new line feature class named riffle_floodplain to store riffle cross sections. This feature class must be in the same coordinate system as the DEM. Riffle locations should have the following characteristics: A straight reach between two meander bends, areas in the cross-overs between river bends Clear indicators of the active floodplain or bankfull discharge Presence of one or more terraces Channel section and form typical of the stream A reasonably clear view of of geomorphic features Areas of high water surface slope (in the case of high gradient streams) Areas of minimum depth and width Channel width parallel and consistent Avoid tributary influences Cross sections should be drawn wide enough to capture the top of bank Digitize riffle cross sections beginning with the left descending bank. In an edit session, use the flip command to ensure riffles are digitized in the correct direction. A red vertex denotes the end of a line segment. Therefore, the red end vertex should be on the right descending bank. Check that each cross section is digitized in the correct direction (start at the left descending bank and end on the right descending bank) before going on to the next step. Ensure that riffle cross sections are digitized to the full width of the active floodplain. Edit each riffle_floodplain feature to ensure that it extends at least to the edge of the Floodplain Mask layer, but no further. This ensures that each riffle_floodplain feature covers the entire floodplain, but does not extend too far into the upland. 5.5.2 Assign Cross Section IDs The purpose of this step is to ensure that riffle cross section identifiers are properly assigned. Assignment of cross section identifiers is critical for later tools to uniquely identify each cross section. Add a long integer field named Seq to the riffle_floodplain feature class to hold the unique number of the cross section. This will be used to iterate through cross sections. Assign integer values to the Seq field starting with one. Begin numbering at the downstream extent of the study area and moving upstream. 5.6 Calculate Riffle Geometry The purpose of the next three steps is to calculate the geometry of the cross sections defined in the previous steps. 5.6.1 Calculate Cross Section Watershed Area The purpose of this step is calculate the watershed area of each cross section. The watershed area draining to each cross section will be used in later steps to define several hydraulic geometry relationships. Add the NHDPlus flow accumulation NHDPlus_FAC that has been clipped to the study region to an ArcMap document. Measure the distance from the flowline to each cross section to determine the snap distance required. Use the 12 - XS Watershed Area tool to calculate the watershed area for each cross section. Complete this step for both the riffle_channel and riffle_floodplain feature classes. 5.6.2 Assign Cross Section River Position The purpose of this step is to assign a river position to each cross section. The river position of each cross section will be used in later steps to calculate several channel parameters (i.e., gradient, sinuosity). Use the 13 - XS Assign River Position tool to calculate the distance to the mouth of the river for each cross section. Complete this step for both the riffle_channel and riffle_floodplain feature classes. 5.6.3 Create the riffle_channel feature class The purpose of this step is to trim the riffle cross sections in the riffle_floodplain feature class to match the extent of the Channel Mask layer. This allows a more detailed examination of the channel area. In ArcCatalog, make a copy of the riffle_floodplain feature class and name it riffle_channel. Edit each riffle_channel feature to ensure that it extends at least to the edge of the Channel Mask layer, but no further. Use snapping to ensure that vertices of the riffle_channel features are coincident with the riffle_floodplain features. This ensures that each riffle_channel feature covers the entire channel, but does not extend too far into the floodplain. 5.6.4 Calculate Cross Section Station Points The purpose of this step is convert the cross section line feature class into a point feature class representing cross section station points. This feature class will be used in later steps to calculate hydraulic geometry dimensions. Use the 14 - XS Create Station Points tool to calculate cross section station points for each cross section. For this study, set the station_distance parameter to 0.3048 meter (1 foot). This tool creates a new feature class named riffle_points. Complete this step for both the riffle_channel and riffle_floodplain feature classes. 5.6.5 Check Cross Sections The purpose of this step is to plot each cross section to ensure it was digitized correctly. Use the 15 - XS Plot tool to plot each riffle cross section. Use the detrended bankfull elevation value that you selected for the initial channel extent for the value of the bankfull_elevation for the purpose of this QA check. After creating a plot of the first cross section, in the R Graphics window, turn on recording (History|Recording) to keep a record of the subsequent cross section plots created during this session. Use the keyboards Page Up and Page Down keys to scroll through the plots. If you make a mistake, use the History|Clear History menu item to clear the previously recorded graphs. Use the cross section profile plots to check that the digitized cross sections have the following characteristics: Banks should be digitized to a high enough elevation sufficient to extend across the active floodplain. However, do not exceed this elevation as it will reduce the resolution of the geomorphic features within the the channel displayed on the graph. Left and right banks are digitized to a similar elevation. One bank should not be extremely higher that the other. 5.7 Estimate Bankfull The purpose of this step is to produce the Estimate Bankfull Report. This report will be used to estimate the bankfull water surface elevation for the current reach. This report conducts a sensitivity analysis using the regional curve estimates of channel dimensions across a range of elevation values to identify the bankfull elevation value that best fits the regional curve estimate. Use the 19 Estimate Bankfull tool to produce the Estimate Bankfull Report. xs_points_fc: Riffle cross section points: riffle_points regions: Select the regional curve that will be used to estimate the bankfull water surface elevation. from_elevation: The lowest detrended elevation value that defines the lower end of the range to be used for the sensitivity analysis. to_elevation: The highest detrended elevation value that defines the upper end of the range to be used for the sensitivity analysis. by_elevation: The value to increment the sequence by between from_elevation and to_elevation. These three values define the sequence used to create the sensitivity analysis. bankfull_estimate: The detrended elevation value that defines the bankfull water surface elevation. output_dir: The folder where the Estimate Bankfull Report will be saved. output_format: The file format of the report. The 19 Estimate Bankfull tool is intended to be run iteratively, testing the fit of a range of detrended bankfull elevations. Use the Bankfull Elevation Goodness of Fit graph in the report to determine the detrended bankfull elevation that minimizes error. Choose the detrended bankfull elevation that minimizes error on subsequent runs of the report. From the initial Estimate Bankfull Report, select the detrended bankfull elevation that minimizes error on the Bankfull Elevation Goodness of Fit graph and rerun the report using that value. In the example figure below, the detrended bankfull elevation of 104 ft. minimizes error (y-axis Mean Average Error) for both area and depth. Although 102 ft. appears to be the detrended elevation that minimizes error for width, 104 ft. does a better job for area and depth. Therefore, using the logic of best two out three, a detrended bankfull elevation of 104 ft. should be chosen for this reach and will be used for later steps in this analysis. Figure 5.1: Bankfull Elevation Goodness of Fit 5.8 Identify Infrastructure The purpose of this step is to identify infrastructure that impacts stream structure and function throughout the reach. These infrastructure features will be used to indicate the position of infrastructure in several maps and graphs. Create a new point feature class named features. The feature class should contain the following fields: Name - Text (50), Used to record the name of the infrastructure. km_to_mouth - double, Used to record the longitudinal position along the reach. Working upstream from the downstream end of the reach, examine the DEM and aerial imagery for infrastructure that could potentially impact stream structure and function. Add the flowline_points feature class to the map document. Start an edit session on the features feature class. When impacting infrastructure is found, create a point feature centered on the flowline feature class. Assign it a descriptive label in the Name field, and record its longitudinal position along the reach (see next bullet) in the km_to_mouth field. To determine an infrastructure features longitudinal position along the reach, use the identify tool to find the closest point in the flowline_points feature class and use its POINT_M value. Repeat these steps to record all of the infrastructure points along a reach. 5.9 Define Valley Line The purpose of this step is to define a line that represents the trend of the valley for the stream reach. 5.9.1 Define Flood Prone Extent The purpose of this step is to define a flood prone extent for the reach. From the Bankfull Estimate report created in the last step, identify the detrended bankfull elevation. In the example above, this value was 104 ft. Determine the bankfull depth. The detrending process expresses stream elevations using a base index value of 100. Therefore an estimate of detrended bankfull elevation of 104 ft. means that at bankfull discharge, the water surface elevation is 4 ft. above the detrended stream base index value of 100 ft. for this reach. This value is similar to the bankfull depth (with caveats). Determine flood prone height. Flood prone has been determined through empirical studies to be approximately two times the bankfull depth. Using the bankfull depth calculated in the last step, calculate the flood prone depth (8 ft.). Therefore, the flood prone detrended elevation would be 108 ft. With the detrended flood prone elevation for your reach determined in the last step, use the 08 - Water Surface Extent tool to extract a flood prone area polygon. This tool creates a new polygon feature class named banks_raw_xxx, where xxx is the detrended elevation selected. This feature class must be edited to select the flood prone area polygon(s). Open the attribute table for the banks_raw_xxx feature class and use advanced sorting to sort first by gridcode and then by Shape_Area. Polygons with gridcode = 1 are polygons inundated at the detrended elevation. Typically, the polygons with the largest area represent the channel. Begin selecting gridcode = 1 polygons with the largest area until the entire flood prone area is selected. Export these selected features to a new feature class named flood_prone. Delete the banks_raw_xxx feature class created in this section. 5.9.2 Create Candidate Valley Lines The purpose of this step is to create a set of candidate valley lines created by smoothing the flowline. Several smoothed valley lines will be created in this section. This set of valley lines will be selected from in the next section. Use the ESRI Smooth Line tool to smooth the flowline feature class. Use the PAEK smoothing algorithm. Use a Smoothing Tolarance value of 200 meters. Name the output feature class valleyline_200 Repeat the previous step using the Smoothing Tolerance values of 250, 300, 350, 400, 450, and 500. 5.9.3 Select the Valley Line The purpose of this step is to select from the set of valley line feature classes created above the valley line that is most smoothed but still fits (mostly) within the flood_prone polygon extent. Add the flood_prone polygon and all of the valley line feature classes to a map document. Identify the valley line feature class that has the highest smoothing tolerance value that also is mostly contained within the extent of the flood_prone polygon. Rename the selected valley line to valleyline. 5.10 Define Meander Loops The purpose of this step is to delineate the meander loops and bends for the stream reach. 5.10.1 Create a Bankfull Polygon The purpose of this step is to create is the extract a bankfull extent polygon. From the Estimate Bankfull Estimate report created previously, identify the detrended bankfull elevation. In the example above, this value was 104 ft. With the detrended elevation for your reach determined, use the 08 - Water Surface Extent tool to extract a bankfull area polygon. This tool creates a new polygon feature class named banks_raw_xxx, where xxx is the detrended elevation selected. This feature class must be edited to select the bankfull area polygon(s). Open the attribute table for the banks_raw_xxx feature class and use advanced sorting to sort first by gridcode and then by Shape_Area. Polygons with gridcode = 1 are polygons inundated at the detrended elevation. Typically, the polygons with the largest area represent the channel. Begin selecting gridcode = 1 polygons with the largest area until the entire bankfull area is selected. Export these selected features to a new feature class named bankfull_area. Delete the banks_raw_xxx feature class created in this section. 5.10.2 Create the banklines feature class The purpose of this step is to create a banklines feature class that represents the banklines at the bankfull elevation. The banklines feature class will have two records, one representing the left descending bankline and another the right descending bankline for the stream reach. Use the Polygon To Line tool to convert the bankfull_area polygon feature class created in a previous step into a line feature class named banklines. Add a new text field to the banklines feature class named ReachName. Add a new long integer field to the banklines feature class named bank_id. Add a new text field to the banklines feature class named bank. The purpose of this field is to designate which bank is the right descending bank and which is the left descending bank. Start a new edit session on the banklines feature class. Use the Explode Multipart Feature on the advanced editing toolbar to explode the multipart line feature for the bankline feature class. Add the flowline feature class to the map document. Use the Split Tool to split the line features at the end of the flowline. The banklines should not extend past the end of the flowline. Use the Split Tool to trim any tributaries from the banklines feature class. The goal of this step is to have only two features, one representing the left descending bankline and another the right descending bankline. Delete all other line features. Ensure that the banklines are digitized in the upstream direction. Edit the banklines feature class to ensure that each bankline is digitized beginning with the downstream end and digitized upstream. In an edit session, select the flowline, choose to edit vertices, and ensure that the red endpoint is at the upstream end of each bankline. Use the flip command to ensure each bankline is digitized in the correct direction. Check that each bankline is digitized in the upstream direction (red endpoint at the upstream end) before going on to the next step. In the ReachName field enter the reach name. In the bank field, enter the string right descending or left descending to designate which bank each line represents. In the bank_id field enter a 1 for the right descending bank and 2 for the left descending bank. 5.10.3 Create the loop_points feature class The purpose of this step is to create a point feature class to delineate the start, end, and apex of each meander loop and bend. Create a new point feature class named loop_points. Enable z and m values. The feature class should contain the following fields: loop - long integer bend - long integer position - text (10) ReachName - text (50) Begin numbering loops and bends starting at the downstream end of the reach and increase numbering upstream. The beginning and end of loops are delineated when the valleyline definitively crosses the flowline. If the flowline crosses the valleyline and then crosses back over in a short distance, this is not considered a definitive crossing. A definitive crossing is one where the flowline approaches the valleyline, crosses it, and then continues to move away from it for a long distance. 5.10.4 Create the bankline_points feature class The purpose of this step is to convert the banklines feature class into a set of bankline points that hold loop and bend information from the loop_points feature class. Use the 14b - Bankline Points tool to assign loops, bends, elevations and valley line positions to bankline points. When the tool completes, check that this tools runs correctly by ensuring that the loop, bend, position, valley_POINT_X, valley_POINT_Y, and valley_POINT_M fields are populated. Only bankline point features within loops and bends will have values in the loop, bend, and position fields. However, all records should have values in the valley_POINT_X, valley_POINT_Y, and valley_POINT_M fields. Apply the following definition query to the bankline_points feature class: loop IS NOT NULL. Only bankline_points features between loop_points features should be visible. 5.10.5 Assign Loops and Bends to Cross Sections The purpose of this step is to assign the loops and bends defined in the last step to the riffle cross section feature classes. Use the 14c - Assign Loops tool to assign loops and bends to cross sections. Check that the loop and bend fields are assigned the appropriate loop and bend. Complete this step for both the riffle_channel and riffle_floodplain feature classes. 5.11 Calculate Cross Section Geometry The purpose of this step is to calculate cross section dimensions. All of the previous steps were required to prepare input datasets necessary to calculate cross section dimensions. Use the 15 - XS Dimensions tool to calculate channel geometry variables. Use the 15b - XS Planform tool to calculate reach planform variables. "],["level-1-workflow.html", "Chapter 6 Level 1 Workflow 6.1 Create Terrain 6.2 Define Stream Reaches 6.3 Derive Flowline 6.4 Identify Initial Floodplain/Channel Extent 6.5 Layout Regular Cross Sections 6.6 Identify Infrastructure 6.7 Level 1 Report 6.8 Determine Next Steps", " Chapter 6 Level 1 Workflow This chapter describes the workflow steps necessary to complete a Level 1 FluvialGeomorph analysis. 6.1 Create Terrain The purpose of this step is to derive the terrain models needed for this analysis. 6.1.1 Define Study Area The purpose of this step is to define the location and extent of the study area. 6.1.1.1 Create a Study Area Geodatabase Create a new folder on a local workstation drive. Name it for the study area. Within this project folder, create a new study area file geodatabase. Name it for the study area. 6.1.1.2 Define the Longitudinal Extent of the Study Area Use the USGS National Hydrography Dataset(NHD) High Resolution to define the longitudinal extent of the reaches of the study area. Import the NHD Flowline feature class to represent the study area reaches. These will be used only as an initial coarse-scale representation of the study reaches to facilitate early study area definition. This study will derive high resolution definitions of study reaches. Edit the extent of the NHD Flowline feature class into a set of initial study area reaches. 6.1.1.3 Define the Areal Extent of the Study Area. Create a new polygon feature class named study_area. This polygon should outline the extent of the study reaches. If the study reaches are already known, sub divide the study_area polygon into these study reaches. This polygon should define the must-have extent for both communicating the study area, as well as helping to define the area to acquire elevation data. 6.1.1.4 Determine the Contributing Watershed to the Study Area Use the NRCS Watershed Boundary Dataset (WBD) to define the upstream contributing watershed of the study reach. Depending on the scale of the study reach, identify the relevant hierarchical levels to characterize the study area. Import these Hydrologic Unit Code (HUC) polygons into the study area geodatabase. 6.1.2 Acquire Study Area Watershed Elevation Model The purpose of this step is to acquire an existing, pre-made DEM of the entire study area watershed. This DEM will help determine the following parameters: Determine if an existing, pre-made DEM will serve for this analysis. Derive study area watershed extents. Calculate reach scale drainage area. The coverage of this DEM should cover the entire upstream contributing watershed of the study area. 6.1.2.1 Identify a source of elevation data for your study area 6.1.2.2 Determine if the pre-made DEM has sufficient resolution 6.1.2.3 Verify that the DEM elevations are in feet 6.1.2.4 Create a hillshade to improve visualization 6.1.3 Develop High Resolution Elevation Model The purpose of this DEM is to derive a detailed stream terrain model that meets the resolution requirements of the study. 6.1.3.1 Download LiDAR point cloud data 6.1.3.2 Build a DEM from LiDAR point cloud data 6.1.3.3 Verify that the DEM elevations are in feet 6.1.3.4 Create a hillshade to improve visualization 6.1.4 Hydro Modify DEM The purpose of this step is to create a hydro-modified DEM to ensure proper water flow across the study area. 6.1.4.1 Identify Flow Blockages The purpose of this step is to develop a cutlines feature class representing flow blockages in the study area. Examine the stream channel through the study area and determine if there are any blockages to flow in the DEM. Focus only on flow blockages within the main channel of the study reaches. Flow blockages outside of the the channels of the study reaches do not need to be identified for FluvialGeomorph analysis. These blockages are typically built infrastructure such as road embankments where streams are conveyed through culverts or underground storm water structures. If there are flow blockages in the study area reach channels, create a new line feature class named cutlines to store terrain modifications that remove flow blockages. This feature class must be in the same coordinate system as the DEM being modified. In an edit session, identify human structures that block flow along the channel of the stream reach being studied. Draw a cutline beginning at the upstream side of the blockage to a point just downstream of the blockage. The start point and end point of the cutline must cover the area to be modified. The downstream end of this cutline must be located in good data, because the lowest DEM value found along this line will be used to re-assign DEM values to all DEM pixels covered by the cutline. 6.1.4.2 Burn cutlines into the terrains The purpose of this step is to remove flow blockages from the terrain. Use the 02 - Burn Cutlines tool to burn the cutlines features into the study area watershed DEM. This tool creates the dem_hydro raster. Rename this DEM watershed_dem_hydro. Use the 02 - Burn Cutlines tool to burn the cutlines features into the high resolution DEM. This tool creates the dem_hydro raster. 6.1.5 Multiple LiDAR Surveys If multiple LiDAR surveys exist for the study area, repeat the above steps for each LiDAR survey. Each LiDAR survey will receive its own study area geodatabase. Multiple LiDAR resurvey study area geodatabases can be distinguished by appending their collection year to the end of the study area name (e.g. Cole_Creek_2016). Since the contributing watershed is unlikely to change between LiDAR resurveys, it is unnecessary to acquire the watershed elevation model for the new LiDAR resurvey date. Contributing area and stream network derivation (next steps) will need to be repeated for each LiDAR survey date. 6.2 Define Stream Reaches The purpose of this step is to synthetically derive from the terrain the study area reaches and their watersheds. 6.2.1 Calculate Contributing Area The purpose of this step is to calculate the contributing drainage area for each pixel in the DEM. Use the 03a - Contributing Area D8 tool to calculate the contributing area for the study area watershed. This tool creates the contributing_area raster. Rename this DEM watershed_contributing_area. Use the 03 - Contributing Area tool to calculate the contributing area for the high resolution DEM. If created, use the dem_hydro raster as input. The processes parameter of the 03 - Contributing Area tool can be safely set to approximately 2 less than the number of cores on the computer running the tool. 6.2.2 Derive Stream Network The purpose of this step is to derive a synthetic vector stream network from the DEM for the study area. Use the high resolution DEM to derive the stream network. Use the 04 - Stream Network tool to create a synthetic stream network from the hydro-modified DEM. The processes parameter can be safely set to approximately 2 less than the number of cores on the computer running the tool. The threshold parameter should be set to a value of 200,000 to 500,000 depending on the study area. If the resulting stream_network is too dense (requiring a large amount of editing to remove extraneous tributaries), try rerunning the tool and increasing the threshold value. Conversely, if the resulting stream_network is too sparse (not enough of the stream network was delineated), try rerunning the tool and decreasing the threshold value. Edit the resulting stream_network feature class to remove all tributary streams that do not constitute the network that will be analyzed in this study. Edit the stream_network feature class to ensure that stream segments are represented by a single line and that there are no gaps in the steam network. 6.2.3 Calculate Slope and Sinuosity The purpose of this step is to examine the stream network slope and sinuosity to help make decisions about how best to define study reaches. Use the 04a - Stream Network Points tool to convert the stream_network feature class into the stream_networks_points feature class. Use the 04b - Slope and Sinuosity tool to calculate the slope and sinuosity of the stream_network_points feature class. Set the gradient_distance field to the number of upstream stream_network_points features that the tool should look to calculate the slope and sinuosity. Examine the distribution of the slope and sinuosity values along the stream network to help determine the natural breaks in the stream network. 6.2.4 Define Reaches The purpose of this step is to segment the stream network into a set of reaches that can be analyzed in more detail through the remainder of the study. The stream_network must be sub-divided into a set of reach that meet the following requirements: Criteria for creating reaches: Major tributaries should be used to divide reaches. How big of an increase in drainage area/discharge constitutes a major tributary depends on the size of the watershed and physiographic region. A reach should contain a range of similar drainage area values. Slope and sinuosity can be considered in the decision to subdivide a reach. Built infrastructure may be used to divide reaches (e.g., dams, major roads). Study objectives may drive the definition of reaches (e.g., economic benefits analysis, existing project reach definition). Using the criteria chosen from the list above, use the standard ESRI edit tools to sub divide the stream_network feature class into a set of features representing the reaches of your study. Manually edit the stream_network feature class to modify the geometry to create a set of features representing the study area reaches. Set the ReachName field to the value to be used to uniquely define the reach throughout the remainder of the study. Be deliberate with the naming of reaches as these names are used for all operations by each tool. 6.2.5 Delineate Reach Watersheds The purpose of this step is to delineate the watersheds for each reach in the study area. Create a new feature class named watershed_points. Add a new text field named ReachName. Add the watershed_contributing_area raster to a map and symbolize with a hot-cold stretch renderer. Create a feature in the watershed_points feature class to represent the downstream location of each study reach. Place each point within a pixel of high flow accumulation in the watershed_contributing_area raster. Use the 04c - Watershed tool to create a watershed polygon for each feature in the watershed_points feature class. 6.3 Derive Flowline The purpose of this step is to create a new reach geodatabase for a specific study reach and derive the reach flowline. This step will need to be repeated for each reach in the study area. 6.3.1 Create the reach geodatabase The purpose of this step is to create a new reach geodatabase and populate it with initial data. In the study area folder, create a new reach geodatabase named for the reach. Use the ReachName value for the name of this new reach file geodatabase. Back in the study area geodatabase, select the feature in the stream_network feature class representing the current study reach. Use the Data | Export Features function to export the selected reach feature to the new reach geodatabase. Name the exported feature class stream_network. Ensure this new reach geodatabase version of of stream_network contains only one feature representing the current reach. Examine the dem_hydro raster and determine the maximum width of the active floodplain along the entire reach. Be conservative with this estimate. Given its later use, it is important to generously overestimate this value. Use this maximum floodplain width estimate to buffer the reach stream_network feature class and name it stream_network_buffer. Use the ESRI Clip Raster tool to clip the study area geodatabase dem_hydro to the extent of the reach using the stream_network_buffer feature class. Save the clipped raster to the reach geodatabase and name it dem_hydro_&lt;buffer distance&gt; (e.g., dem_hydro_1000 for a buffer distance of 1000 meters). Use the ESRI Clip Raster tool to clip the study area geodatabase contributing_area to the extent of the reach using the stream_network_buffer feature class. Save the clipped raster to the reach geodatabase and name it contributing_area_&lt;buffer distance&gt; (e.g., contributing_area_1000 for a buffer distance of 1000 meters). 6.3.2 Create the Flowline The purpose of this step is to derive the reach flowline. It converts a stream_network feature into a flowline feature class. It smooths the geometry and converts it into a route. Use the 05 - Flowline tool to process the stream_network feature class that was just edited to produce a new flowline feature class. Set the output_workspace parameter to the reach geodatabase. Use a smoothing tolerance from 5-20. The goal is produce a smooth flowline, but not to remove too much resolution from the line. Ensure that the flowline remains in the channel and is not simplified into the floodplain. If this occurs, rerun reducing the degree of smoothing. Edit the flowline feature class to ensure that the flowline is digitized beginning with the downstream end and digitized upstream. In an edit session, select the flowline, choose to edit vertices, and ensure that the red endpoint is at the upstream end of the flowline. If not, use the Reverse Direction (aka flip) command to ensure the flowline is digitized in the upstream direction. It is critical that the flowline is digitized in the upstream direction. If this step is not performed, all subsequent tools will malfunction. 6.3.3 Create Flowline Points The purpose of this step is convert the flowline into a series of points along the reach. This tool takes the flowline feature class, converts it to a route, calculates the distance to the mouth of the river for all vertices, and creates a flowline_points feature class. Use the 06 - Flowline Points tool to convert the flowline feature class into flowline_points. For this study, set the km_to_mouth parameter to 0 and the station_distance field to 1 meter. This tool will create a new feature class named flowline_points. steps for multiple reaches steps for multiple surveys 6.4 Identify Initial Floodplain/Channel Extent 6.4.1 Detrend DEM The purpose of this step is to produce a detrended DEM. A detrended DEM normalizes stream bank elevations for a specific reach. Inspect the reach to determine the width of the active floodplain. Use the measure tool to measure from the flowline outward to the widest extent of the active floodplain. This value will be used as the buffer_distance value in the following step. Use the 07 - Detrend tool to create a detrended DEM for the study reach. Set the buffer_distance field to a distance wide enough to capture the reachs entire active floodplain. 6.4.2 Identify Initial Channel Extent The purpose of this step is to use the detrended DEM to visually extract an initial channel extent polygon. The detrend DEM created in the last step can be used to iteratively explore different inundation extents derived from various water surface elevations. Add the detrend feature class to the map Table of Contents. Name this layer Channel Extent. On the Symbology tab of the Channel Extent layer, use the Classified renderer to classify the raster into 2 classes. Set the first class boundary to the detrended elevation that you would like to explore. Set the color of the first class (min value - detrended elevation) to blue and the color of the second class (detrended elevation - max value) to No Color. Set the transparency of the Channel Extent layer to 50%. Begin to delineate the channel extent by selecting a detrended elevation that inundates the channel up to at least the first terrace. The goal at this stage is to select a detrended elevation that captures the extent of the channel without spilling too much water into the floodplain. Once you discover which detrended elevation begins to allow water to access the floodplain, reduce the detrended elevation value slightly to keep the water in the channel. Try several detrended elevation values to help make the decision. When you have chosen a detrended elevation, use the 08 - Water Surface Extent tool to extract an initial channel extent area polygon. This tool creates a new polygon feature class named banks_raw_xxx, where xxx is the detrended elevation selected. This feature class must be edited to select the channel area polygon(s). Open the attribute table for the banks_raw_xxx feature class and use advanced sorting to sort first by gridcode and then by Shape_Area. Polygons with gridcode = 1 are polygons inundated at the detrended elevation. Typically, the polygons with the largest area represent the channel. Begin selecting gridcode = 1 polygons with the largest area until the entire channel area is selected. Export these selected features to a new feature class named initial_channel_extent. Delete the banks_raw_xxx feature class created in this section. 6.4.3 Create the Initial Channel Mask layer The purpose of this step is to create a layer that defines an area just beyond the initial channel extent. Add the detrend feature class to the map Table of Contents. Name this layer Channel Mask. In the symbology of this layer, change the renderer from stretched to classified. Set the number of classes to 2. In the classification dialog, set the break value between the two classes to about one to two feet higher than the initial bankfull extent estimate. A couple of feet above the initial bankfull extent estimate should define the extent of the just the channel. For example, if the initial bankfull extent was estimated at 102 detrended feet, the initial bankfull height estimate would be 2 feet. One foot higher than the 2 foot initial bankfull height estimate would therefore be 103 detrended feet. Set the transparency of the Channel Mask layer to 50%. 6.4.4 Identify Initial Floodplain Extent The purpose of this step is to create a layer that defines the an initial estimate of the floodplain inundation extent. Add the detrend feature class to the map Table of Contents. Name this layer Floodplain Mask. In the symbology of this layer, change the renderer from stretched to classified. Set the number of classes to 2. In the classification dialog, set the break value between the two classes to four times the initial bankfull extent estimate. Four times the initial bankfull extent estimate should define the extent of the active floodplain. For example, if the initial bankfull extent was estimated at 102 detrended feet, the initial bankfull height estimate would be 2 feet. Four times the 2 foot initial bankfull height estimate would therefore be 108 detrended feet. Set the transparency of the Floodplain Mask layer to 50%. 6.4.5 Calculate Channel Slope Raster The purpose of this step is to create a channel slope raster that can be used in the visual identification of riffle locations in following step. Use the 09 - Channel Slope tool to calculate a raster of the channel slope. Use the intitial_channel_extent polygon created earlier to define the channel area within which the slope raster will be calculated. This tool creates a new feature class named channel_slope. 6.5 Layout Regular Cross Sections The purpose of this step is to create regularly spaced stream cross sections and extract terrain-derived hydraulic parameters for each cross section. 6.5.1 Layout Cross Sections The purpose of this step is to create regularly spaced cross sections for the current reach. The goal of this step is to create a set of regularly spaced cross sections that well represent the channel conditions found in this reach. Determine the typical maximum distance from the reach flowline to the edge of the active floodplain. The goal is not to identify the maximum distance to the edge of the floodplain, but to identify the typical distance to the edge of the floodplain. Determine the spacing between cross sections necessary to represent conditions along this stream. Cross section spacing for small stream of 50-100 feet works well. Larger rivers do not require such tight spacing. Use the 11 - XS Layout tool to create a set of regularly spaced cross sections (referred to as transects in this tool). Use the values determined in the previous steps to set this tools parameters. 6.5.2 Calculate Watershed Area The purpose of this step is to calculate the contributing drainage area for each cross section. From the study area geodatabase, use the watershed_contributing_area raster that covers the entire contributing watershed of the study area. Use the ERSI Clip Raster tool to clip the watershed_contributing_area raster to stream_network_buffer to speed tool run time. Add the contributing_area_buffer raster to a map and symbolize with a hot-cold stretch renderer. Add the flowline and regular cross section features classes to the map. Place them on top of the contributing_area_buffer raster. Determine the maximum distance from the intersection of each cross section and the flowline to the nearest pixel of high flow in the contributing_area_buffer raster. This value will be used for the snap_distance in the next step. Use the 12 - XS Watershed Area tool to calculate the watershed area for each cross section. 6.5.3 Assign River Position 6.5.4 Calculate Cross Section Station Points 6.5.5 Calculate Cross Section Dimensions Check degree of elevation smoothing by creating a chart. 6.6 Identify Infrastructure The purpose of this step is to identify built infrastructure in the floodplain that may be affecting channel hydraulics. 6.6.1 Digitize Built Infrastructure 6.7 Level 1 Report 6.7.1 Run the Report 6.7.2 QA Checklist 6.8 Determine Next Steps The purpose of this step is to determine what further steps need to be taken. "],["level-2-workflow.html", "Chapter 7 Level 2 Workflow", " Chapter 7 Level 2 Workflow This chapter describes the workflow steps necessary to complete a Level 2 FluvialGeomorph analysis. "],["level-3-workflow.html", "Chapter 8 Level 3 Workflow", " Chapter 8 Level 3 Workflow This chapter describes the workflow steps necessary to complete a Level 3 FluvialGeomorph analysis. "],["summary.html", "Chapter 9 Summary", " Chapter 9 Summary The concluding chapter is the last chapter in the main body of the report before the reference list. The title and content may vary depending on the project type and audience. The chapter is usually called Summary, Conclusions, or Conclusions and Recommendations. A technical report may conclude with a summary chapter if its purpose is to document empirical observations or straightforward research findings such as the results of a field demonstration or a laboratory test series. A summary typically reviews the research results in more detail than the abstract. A chapter of conclusions differs from a summary chapter in that it presents or reviews the authors technical interpretation of the research results. Conclusions concisely help the reader to understand how the research objective was met and what the results mean in terms of the Army problem described in the background section. Conclusions should be included for every secondary objective stated in the introductory chapter. Most reports will include recommendations for the project sponsor. Recommendations generally will pertain to (1) how the research product or results should be used to address the problem defined in the first chapter or (2) what the sponsor may do to transition a technology product into advanced development, field demonstration, or commercialization. "],["qa-checklist.html", "QA Checklist 9.1 Level 1 Report 9.2 Estimate Bankfull Report 9.3 Level 2 Report 9.4 Level 3 Report", " QA Checklist This chapter describes the items an analyst needs to check to ensure that the FluvialGeomorph tools have run correctly to produce clean reports. In addition to following the guidance in the previous chapters when preparing the data and running each tool, this chapter will provide a checklist of items youll need to verify after each report completes. Reports are the place where all your hard work comes together! Your work is not complete just because the tools run without any errors. A lot of datasets must work together to make these reports come out cleanly. Because these reports integrate so many individual datasets, many issues arent discovered until you run the reports. This checklist will help you identify where things might not be exactly right with previous tool runs and what youll need to do fix them. 9.1 Level 1 Report 9.1.1 Study Area Overview This report section contains a set of reach overview maps drawn using the flowline and the regular cross section dimensions, \"_dims_L1\", feature classes (fc). Both the aerial photo and elevation are provided by Mapbox Raster Tiles. 9.1.1.1 Check the stream name All of the tools depend on consistent reach naming! Ensuring consistent naming begins with deriving the flowline fc. The ReachName field must contain the same value for all of the fcs within a reach geodatabase. This is the single biggest gotcha we find running these tools. If tools arent working correctly and youre sure youve done everything else right, consistent stream names is the first thing to check! 9.1.1.2 Cross section labels at the correct interval Cross section labels usually cannot be placed on every cross section or the map or graph becomes unreadable due to label crowding. The xs_label_freq parameter can be adjusted to adequately space cross section labels. Typically xs_label_freq = 10 works for regularly spaced cross sections and xs_label_freq = 2 works for riffle cross sections. 9.1.1.3 Cross sections cover the full extent of the flowine The flowline fc extends from the downstream end of the reach to the upstream end. Cross sections should be spaced regularly across the entire reach, without any gaps at the upper or lower end. 9.1.1.4 Map basemap displaying correctly The overview maps should contain an aerial photo or shaded relief elevation basemap. 9.1.2 Longitudinal Profiles This report section contains two longitudinal profile graphs, one drawn using the flowline_points fc, and the second is drawn using the cross section dimensions, \"_dims_L1\" fc. 9.1.2.1 Elevation values are reasonable The elevation values displayed on the map or graph should be reasonable. Use the Explore tool to check the DEM elevation values. By convention in FluvialGeomorph, DEM values must always have vertical units = feet. 9.1.2.2 Elevation ranges are similar between surveys Although stream elevations can change over time, the elevation ranges between subsequent survey dates should be roughly similar. If the elevation ranges are drastically different, check the terrain development steps for each survey time period to ensure that the elevation data was processed correctly. 9.1.2.3 Multiple surveys are labeled correctly Reports that contain multiple surveys should be entered in the same way to ensure they are labeled and symbolized (e.g., each survey drawn with the same color in each report) the same way across all reports. Follow these guidelines to ensure consistency: Most recent survey listed at the top, with earlier surveys listed in reverse chronologic order. Survey date indicates the date flown (e.g., not the contract or delivery date). 9.1.2.4 Multiple surveys are correctly calibrated to the base year On the longitudinal profile graphs, each survey line should start and end at the same x-axis station value. In other words, one survey line should not end before or after another survey line. Check the far right edge of the longitudinal graph to ensure all surveys have the same ending value. If all of the surveys last station values do not align, it means that the previous surveys were not correctly calibrated to the base year flowline. Previous year surveys will need to have the Flowline Points tool rerun using the base year surveys flowline_points for calibration. 9.1.2.5 Stationing in the correct units Units can be chosen for the longitudinal profile stationing. Ensure that the correct units are selected. 9.1.2.6 Stream feature labels display correctly Longitudinal graphs are labeled using the rows in the features fc. Ensure these river features are labeled correctly and are located at the correct longitudinal position. 9.1.3 Cross Section Metrics This report section contains a Level 1 cross section metrics plot drawn using the cross section dimensions fc, \"_dims_L1\". 9.1.3.1 Cross section watershed area calculated correctly The watershed area metric is calculated by the XS Watershed Area tool. Given the complexities of automatically calculating watershed area for high resolution stream features, some watershed areas may not have been calculated correctly. Rerunning the Watershed Area tool or manual adjustment of the Watershed_Area_SqMile field may be required. Watershed values are reasonable. Watershed area must increase moving downstream. 9.1.3.2 Elevation smoothing is acceptable High resolution LiDAR derived stream elevations can be noisy. Smoothing the elevations longitudinally is a way reduce noise. However, too much smoothing can be applied, eliminating any of the relationships we want to observe. By visually comparing the raw elevation and the smoothed elevation graphs, verify that the amount of smoothing sufficiently reduces noise, but does not not go too far and removes substantive variation. Smoothing is controlled in the XS Dimension tools using the loess_span parameter. 9.1.3.3 Ensure metrics values are smooth Many reach metrics are calculated using a longitudinal moving window analysis. The size of the moving window is controlled in the XS Dimensions tools using the lead_n parameter. A smaller value applies a narrower moving mindow and a larger value applies a wider moving window. If the moving window is too small, metric values will be highly variable along the stream. As the moving window size gets larger, metric value variation will be reduced. 9.1.3.4 Slope values are reasonable Slope values should be greater than zero. If negative slopes are being recorded, it usually means that the moving window size needs to be increased. 9.1.3.5 Sinuosity values are reasonable Sinuosity values should be greater than one. 9.1.4 Cross Section Profiles This report section contains a cross section map and a cross section profile graph for each cross section in the reach. The map is drawn from the cross section dimensions \"_dims_L1\" fc and the dem_hydro raster. The cross section profile graph is drawn using the cross section points fcs for each survey. 9.1.4.1 Cross section must be digitized from left to right The graph is being viewed from the perspective of standing in the stream, looking downstream. To ensure this orientation, cross sections must be digitized from the left descending bank to the right descending bank. 9.1.4.2 Cross section perpenduicular to the channel 9.1.4.3 Cross section covers the channel extent 9.1.4.4 Cross section extends onto floodplain 9.1.4.5 Cross section not located on built infrastructure 9.1.4.6 Cross section drawn within the DEM extent 9.1.4.7 Cross section y-axis range is not too large 9.1.4.8 Cross section x-axis range is not too large 9.2 Estimate Bankfull Report 9.2.1 Study Area Overview This report section contains a set of reach overview maps drawn using the flowline and the riffle cross section dimensions, \"_dims_L2\", feature classes (fc). Both the aerial photo and elevation are provided by Mapbox Raster Tiles. See the QA checklist items in the Level 1 Report, Study Area Overview section. 9.2.2 Bankfull Elevation Sensitivity Analysis This report section contains the Bankfull Elevation Goodness of Fit graph and the Regional Hydraulic Geometry Curves graph drawn using the base years riffle cross section points fc. 9.2.2.1 Correct regions included 9.2.2.2 Adequate range of bankfull elevations 9.2.2.3 Detrended bankfull elevation set to a reasonable value 9.2.2.4 Drainage Area values are reasonable 9.2.3 Longitudinal Profile This section of the report contains a cross section longitudinal profile graph drawn using the riffle cross section dimensions, riffle_channel_dims_L2 fc. 9.2.3.1 Elevation values are reasonable 9.2.3.2 Stationing in the correct units 9.2.3.3 Stream feature labels display correctly 9.2.4 Cross Section Metrics This report section contains a Level 2 cross section metrics plot drawn using the riffle_channel_dims_L2 fc. 9.2.4.1 Width-Depth Ratio values are reasonable 9.2.4.2 Entrenchment Ratio values are reasonable 9.2.4.3 Slope values are reasonable 9.2.4.4 Sinuosity values are reasonable 9.2.4.5 Shear Stress values are reasonable 9.2.4.6 Unit Stream Power values are reasonable 9.2.5 Cross Section Profiles This report section contains a cross section map and a cross section profile graph for each cross section in the reach. The map is drawn from the cross section dimensions fc riffle_channel_dims_L2 and the dem_hydro raster. The cross section profile graph is drawn using the riffle_channel_points fcs for each survey. see the QA checklist items in the Level 1 Report, Cross Section Profiles section. 9.3 Level 2 Report 9.3.1 Study Area Overview This report section contains a set of reach overview maps drawn using the flowline and the regular cross section dimensions, \"_dims_L2\", feature classes (fc). Both the aerial photo and elevation are provided by Mapbox Raster Tiles. See the QA checklist items in the Level 1 Report, Study Area Overview section. 9.3.2 Longitudinal Profile This section of the report contains a cross section longitudinal profile graph drawn using the regular cross section dimensions, \"_dims_L2\" fc. See the QA checklist items in the Estimate Bankfull, Longitudinal Profile section. 9.3.3 Cross Section Metrics This report section contains a Level 2 cross section metrics plot drawn using the regular cross section dimensions, \"_dims_L2\" fc.See the QA checklist items in the Estimate Bankfull, Cross section Metrics section. 9.3.3.1 Ensure metrics values are smooth 9.3.4 Cross Section Profiles This report section contains a cross section map and a cross section profile graph for each cross section in the reach. The map is drawn from the regular cross section dimensions fc \"_dims_L2\" and the dem_hydro raster. The cross section profile graph is drawn using the cross section \"_points\" fcs for each survey. see the QA checklist items in the Level 1 Report, Cross Section Profiles section. 9.4 Level 3 Report 9.4.1 Study Area Overview This report section contains a set of reach overview maps drawn using the flowline and the regular cross section dimensions, \"_dims_L3\", feature classes (fc). Both the aerial photo and elevation are provided by Mapbox Raster Tiles. See the QA checklist items in the Level 1 Report, Study Area Overview section. 9.4.2 Longitudinal Profile This section of the report contains a cross section longitudinal profile graph drawn using the regular cross section dimensions, \"_dims_L3\" fc. See the QA checklist items in the Estimate Bankfull, Longitudinal Profile section. 9.4.3 Cross Section Metrics This report section contains a Level 2 cross section metrics plot drawn using the regular cross section dimensions, \"_dims_L3\" fc.See the QA checklist items in the Estimate Bankfull, Cross section Metrics section. 9.4.3.1 Ensure metrics values are smooth 9.4.3.2 Radius of Curvature to Bankfull Width values are reasonable 9.4.4 Cross Section Profiles This report section contains a cross section map and a cross section profile graph for each cross section in the reach. The map is drawn from the regular cross section dimensions fc \"_dims_L3\" and the dem_hydro raster. The cross section profile graph is drawn using the cross section \"_points\" fcs for each survey. see the QA checklist items in the Level 1 Report, Cross Section Profiles section. "],["references.html", "References", " References "]]
